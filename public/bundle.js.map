{"version":3,"sources":["webpack:///webpack/bootstrap e60d27cd3b77c390b467","webpack:///./src/adjacency-list/adjacency-list.js","webpack:///./src/find-bridges/find-bridges.js","webpack:///./src/svg-graph-drawer/svg-graph-drawer.js","webpack:///./src/hamma-algorithm/hamma-algorithm.js","webpack:///./src/spring-embedder/spring-embedder.js","webpack:///./src/main.scss","webpack:///./src/main.js","webpack:///./src/plane-worker/plane-worker.js","webpack:///./src/plane/plane.js","webpack:///./~/svg-catmull-rom-spline/index.js","webpack:///./~/svg-catmull-rom-spline/~/simplify-js/simplify.js"],"names":["AdjacencyList","nodes","addNode","nodeName","undefined","type","neighbors","addEdge","node1Name","node2Name","initializeFromText","nodesText","i","length","currNode","split","removeNode","node","removeEdge","removeEdges","edges","begin","end","removeEdgesWithRemovingAloneNodes","Object","keys","getConnectedComponents","components","checkedNodes","key","component","addNeighbors","call","push","print","textGroup","lastChild","removeChild","count","tspan","createTSpan","appendChild","key1","currText","key2","text","x","y","document","createElementNS","setAttribute","textContent","printNodesAndBridgesText","bridges","calculateDepthSearchAndFindBridges","number","num","top","bypassEdges","searchNode","parentNode","Math","min","filter","edge","findBridges","SvgGraphDrawer","svgField","draw","initializeField","drawNodes","drawEdges","innerHTML","nodesGroup","edgesGroup","circle","line","drawHelpLines","helpEdgesGroup","insertBefore","children","HammaAlgorithmWorker","makePlanarity","graph","planarizeGraph","loop","findLoop","path","planeWorker","initializeFromLoop","svgGraphDrawer","segments","findSegments","addedNodes","badSegments","chain","calculateGammaFromSegments","planes","sort","segment1","segment2","gammaCount","splice","findChain","contactNodes","planesIn","plane1","plane2","isOuter","addChain","removeChain","maxLoopLength","pathResult","searchLoopInNeighbors","slice","transformPathResultToLoopAndEdges","loopLength","getLoopLength","newPath","visitedNodes","includes","checkContactNode","segment","searchSegment","array","neighbor","j","isSegmentIn","isNodeInLoop","start","deepSearch","prev","current","res","chainToDelete","l","k1","k2","delta","clear","getNodesAndEdges","name","randomizeNodeCoordinates","height","width","floor","random","drawGraph","distance","node1","node2","sqrt","calculatePowerXForEachNode","p","f","q","d","g","FX","calculatePowerYForEachNode","FY","addExtention","firstStep","timerId","clearInterval","makeOneStabilization","startStabilization","setInterval","drawField","getElementById","value","toDraw","addEventListener","replace","calculateOffset","startStab","planarityFirstStep","initGraph","hammaAlgorithmWorker","canvasSize","nodeRadius","canvasCorners","topLeft","topRight","bottomLeft","bottomRight","center","uniqueHelpPointId","PlaneWorker","radius","angle","PI","cos","sin","outerLoop","plane","triangles","findTriangles","findPathFromTriangles","putChainToPath","addPathToGraph","helpPlaneInfo","isPlaneLoopBroken","newPlanes","map","pathItem","item","id","getEdgesFromLoop","newEdges","startName","middle","endName","isCrosingWithPolygonEdges","isNodeInsidePoligone","areCrossing","p1","p2","p3","p4","v1","vectorMult","v2","v3","v4","l1","sqr","l2","ax","ay","bx","by","point","inside","xi","yi","xj","yj","intersect","trianglesPath","triangelsToSearch","isVisited","triangle","triangleItem","isNodeInTriangle","handleOneTrianglePath","isPathFind","prePath","newTrianglesPath","contactEdge","FindIfTriangleTouchAnotherTriangle","k","convertTrianglesPath","isEdgeInLoop","getPathElem","next","triangle1","triangle2","coordinates","getMiddleOfLineSegment","increasePathLength","decreasePathLength","isPathComplete","getMiddle","point1","point2","each","loopEdge","areCrossingWithTouch","isLoopBroken","newStartEdge","findNewStartEdge","uniqueID","Plane","addSimpleChain","addChainInOuterLoop","loop1","loop2","isPlaneOuter","unshift"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;AChEA,SAASA,aAAT,GAAyB;AACxB,MAAKC,KAAL,GAAa,EAAb;;AAEA,MAAKC,OAAL,GAAe,UAAUC,QAAV,EAAoB;AAClC,MAAG,KAAKF,KAAL,CAAWE,QAAX,KAAsBC,SAAzB,EACE,KAAKH,KAAL,CAAWE,QAAX,IAAuB;AACtBE,SAAM,QADgB;AAEtBC,cAAW;AAFW,GAAvB;AAIF,EAND;;AAQA,MAAKC,OAAL,GAAe,UAAUC,SAAV,EAAqBC,SAArB,EAAgC;AAC9C,OAAKR,KAAL,CAAWO,SAAX,EAAsBF,SAAtB,CAAgCG,SAAhC,IAA6C,IAA7C;AACA,OAAKR,KAAL,CAAWQ,SAAX,EAAsBH,SAAtB,CAAgCE,SAAhC,IAA6C,IAA7C;AACA,EAHD;;AAKA,MAAKE,kBAAL,GAA0B,UAAUC,SAAV,EAAqB;AAC9C,OAAKV,KAAL,GAAa,EAAb;AACA,OAAI,IAAIW,IAAI,CAAZ,EAAeA,IAAID,UAAUE,MAA7B,EAAqCD,GAArC,EAA0C;AACzC,OAAID,UAAUC,CAAV,MAAe,EAAnB,EAAuB;AACtB,QAAIE,WAAWH,UAAUC,CAAV,EAAaG,KAAb,CAAmB,IAAnB,CAAf;AACA,SAAKb,OAAL,CAAaY,SAAS,CAAT,CAAb;;AAEA,QAAGA,SAAS,CAAT,CAAH,EAAgB;AACf,UAAKZ,OAAL,CAAaY,SAAS,CAAT,CAAb;AACA,UAAKP,OAAL,CAAaO,SAAS,CAAT,CAAb,EAA0BA,SAAS,CAAT,CAA1B;AACA;AACD;AACD;AACD,EAbD;;AAeA,MAAKE,UAAL,GAAkB,UAAUb,QAAV,EAAoB;AACrC,SAAO,KAAKF,KAAL,CAAWE,QAAX,CAAP;AACA,OAAK,IAAIc,IAAT,IAAiB,KAAKhB,KAAtB,EAA6B;AAC5B,UAAO,KAAKA,KAAL,CAAWgB,IAAX,EAAiBX,SAAjB,CAA2BH,QAA3B,CAAP;AACA;AACD,EALD;;AAOA,MAAKe,UAAL,GAAkB,UAAUV,SAAV,EAAqBC,SAArB,EAAgC;AACjD,SAAO,KAAKR,KAAL,CAAWO,SAAX,EAAsBF,SAAtB,CAAgCG,SAAhC,CAAP;AACA,SAAO,KAAKR,KAAL,CAAWQ,SAAX,EAAsBH,SAAtB,CAAgCE,SAAhC,CAAP;AACA,EAHD;;AAKA,MAAKW,WAAL,GAAmB,UAAUC,KAAV,EAAiB;AACnC,OAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIQ,MAAMP,MAA1B,EAAkCD,GAAlC,EAAuC;AACtC,QAAKM,UAAL,CAAgBE,MAAMR,CAAN,EAASS,KAAzB,EAAgCD,MAAMR,CAAN,EAASU,GAAzC;AACA;AACD,EAJD;;AAMA,MAAKC,iCAAL,GAAyC,UAAUH,KAAV,EAAiB;AACzD,OAAKD,WAAL,CAAiBC,KAAjB;AACA,OAAK,IAAIH,IAAT,IAAiB,KAAKhB,KAAtB,EAA6B;AAC5B,OAAIuB,OAAOC,IAAP,CAAY,KAAKxB,KAAL,CAAWgB,IAAX,EAAiBX,SAA7B,EAAwCO,MAAxC,KAAmD,CAAvD,EAA0D;AACzD,SAAKG,UAAL,CAAgBC,IAAhB;AACA;AACD;AACD,EAPD;;AASA,MAAKS,sBAAL,GAA8B,YAAY;AACzC,MAAIC,aAAa,EAAjB;AACA,MAAIC,eAAe,EAAnB;;AAEA,OAAK,IAAIC,GAAT,IAAgB,KAAK5B,KAArB,EAA4B;AAC3B,OAAG2B,aAAaC,GAAb,CAAH,EAAsB;;AAEtBD,gBAAaC,GAAb,IAAoB,IAApB;;AAEA,OAAIC,YAAY,IAAI9B,aAAJ,EAAhB;;AAEA8B,aAAU5B,OAAV,CAAkB2B,GAAlB;AACAE,gBAAaC,IAAb,CAAkB,IAAlB,EAAwBH,GAAxB,EAA6BC,SAA7B,EAAwCF,YAAxC;AACAD,cAAWM,IAAX,CAAgBH,SAAhB;AACA;;AAED,WAASC,YAAT,CAAsB5B,QAAtB,EAAgC2B,SAAhC,EAA2CF,YAA3C,EAAyD;AACxD,QAAK,IAAIC,GAAT,IAAgB,KAAK5B,KAAL,CAAWE,QAAX,EAAqBG,SAArC,EAAgD;AAC/CwB,cAAU5B,OAAV,CAAkB2B,GAAlB;AACAC,cAAUvB,OAAV,CAAkBJ,QAAlB,EAA4B0B,GAA5B;;AAEA,QAAI,CAACD,aAAaC,GAAb,CAAL,EAAwB;AACvBD,kBAAaC,GAAb,IAAoB,IAApB;AACAE,kBAAaC,IAAb,CAAkB,IAAlB,EAAwBH,GAAxB,EAA6BC,SAA7B,EAAwCF,YAAxC;AACA;AACD;AACD;;AAED,SAAOD,UAAP;AACA,EA7BD;;AA+BA,MAAKO,KAAL,GAAa,UAAUC,SAAV,EAAqB;AACjC,SAAOA,UAAUC,SAAjB,EAA4B;AAC3BD,aAAUE,WAAV,CAAsBF,UAAUC,SAAhC;AACA;;AAED,MAAIE,QAAQ,CAAZ;;AAEA,MAAIC,QAAQC,YAAY,mBAAZ,EAAiC,EAAjC,EAAqC,CAACF,QAAQ,CAAT,IAAc,EAAnD,CAAZ;AACAH,YAAUM,WAAV,CAAsBF,KAAtB;AACAD;;AAEA,OAAK,IAAII,IAAT,IAAiB,KAAKzC,KAAtB,EAA6B;AAC5B,OAAI0C,WAAWD,OAAO,IAAtB;AACA,QAAK,IAAIE,IAAT,IAAiB,KAAK3C,KAAL,CAAWyC,IAAX,EAAiBpC,SAAlC,EAA6C;AAC5CqC,gBAAUC,OAAK,IAAf;AACA;AACDL,WAAQC,YAAYG,QAAZ,EAAsB,EAAtB,EAA0B,CAACL,QAAQ,CAAT,IAAc,EAAxC,CAAR;AACAH,aAAUM,WAAV,CAAsBF,KAAtB;;AAEAD;AACA;;AAED,WAASE,WAAT,CAAqBK,IAArB,EAA2BC,CAA3B,EAA8BC,CAA9B,EAAiC;AAChC,OAAIR,QAAQS,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAZ;AACAV,SAAMW,YAAN,CAAmB,GAAnB,EAAwBJ,CAAxB;AACAP,SAAMW,YAAN,CAAmB,GAAnB,EAAwBH,CAAxB;AACAR,SAAMY,WAAN,GAAoBN,IAApB;AACA,UAAON,KAAP;AACA;AACD,EA7BD;AA8BA;;kBAEcvC,a;;;;;;;;;;;;ACzHf,SAASwC,WAAT,CAAqBK,IAArB,EAA2BC,CAA3B,EAA8BC,CAA9B,EAAiC;AAChC,KAAIR,QAAQS,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAZ;AACAV,OAAMW,YAAN,CAAmB,GAAnB,EAAwBJ,CAAxB;AACAP,OAAMW,YAAN,CAAmB,GAAnB,EAAwBH,CAAxB;AACAR,OAAMY,WAAN,GAAoBN,IAApB;AACA,QAAON,KAAP;AACA;;AAED;AACA,SAASa,wBAAT,CAAkCnD,KAAlC,EAAyCoD,OAAzC,EAAkDlB,SAAlD,EAA6D;AACxD,QAAOA,UAAUC,SAAjB,EAA4B;AACrBD,YAAUE,WAAV,CAAsBF,UAAUC,SAAhC;AACH;AACR,KAAIE,QAAQ,CAAZ;;AAEA,KAAIC,QAAQC,YAAY,mBAAZ,EAAiC,EAAjC,EAAqC,CAACF,QAAQ,CAAT,IAAc,EAAnD,CAAZ;AACAH,WAAUM,WAAV,CAAsBF,KAAtB;AACAD;;AAEA,MAAK,IAAII,IAAT,IAAiBzC,KAAjB,EAAwB;AACvB,MAAI0C,WAAWD,OAAO,IAAtB;AACA,OAAK,IAAIE,IAAT,IAAiB3C,MAAMyC,IAAN,EAAYpC,SAA7B,EAAwC;AACvCqC,eAAUC,OAAK,IAAf;AACA;AACDL,UAAQC,YAAYG,QAAZ,EAAsB,EAAtB,EAA0B,CAACL,QAAQ,CAAT,IAAc,EAAxC,CAAR;AACAH,YAAUM,WAAV,CAAsBF,KAAtB;;AAEAD;AACA;;AAEDC,SAAQC,YAAY,QAAZ,EAAsB,EAAtB,EAA0B,CAACF,QAAQ,CAAT,IAAc,EAAxC,CAAR;AACAH,WAAUM,WAAV,CAAsBF,KAAtB;AACAD;;AAEA,MAAK,IAAI1B,IAAI,CAAb,EAAgBA,IAAIyC,QAAQxC,MAA5B,EAAoCD,KAAK0B,OAAzC,EAAkD;AACjDC,UAAQC,YAAYa,QAAQzC,CAAR,EAAWS,KAAX,GAAmB,MAAnB,GAA4BgC,QAAQzC,CAAR,EAAWU,GAAvC,GAA6C,IAAzD,EAA+D,EAA/D,EAAmE,CAACgB,QAAQ,CAAT,IAAc,EAAjF,CAAR;AACAH,YAAUM,WAAV,CAAsBF,KAAtB;AACA;AACD;;AAED,SAASe,kCAAT,CAA4CrD,KAA5C,EAAmD;AAClD,KAAIsD,SAAS,CAAb;;AAEA,KAAIC,MAAM,EAAV;AACA,KAAIC,MAAM,EAAV;AACA;AACA,KAAIC,cAAc,EAAlB;;AAEA,MAAK,IAAI7B,GAAT,IAAgB5B,KAAhB,EAAuB;AACtBuD,MAAI3B,GAAJ,IAAW,CAAX;AACA;;AAED,MAAK,IAAIA,GAAT,IAAgB5B,KAAhB,EAAuB;AACtB,MAAIuD,IAAI3B,GAAJ,KAAY,CAAhB,EAAmB;;AAEnB8B,aAAWvD,SAAX,EAAsByB,GAAtB;AACA;;AAED,UAAS8B,UAAT,CAAoBC,UAApB,EAAgC9C,QAAhC,EAA0C;AACzC0C,MAAI1C,QAAJ,IAAgByC,MAAhB;AACAE,MAAI3C,QAAJ,IAAgByC,MAAhB;AACAA;;AAEA,OAAK,IAAI1B,GAAT,IAAgB5B,MAAMa,QAAN,EAAgBR,SAAhC,EAA2C;AAC1C,OAAGkD,IAAI3B,GAAJ,KAAY,CAAf,EAAkB;AACjB6B,gBAAYzB,IAAZ,CAAiB;AAChBZ,YAAOP,QADS;AAEhBQ,UAAKO;AAFW,KAAjB;AAIA8B,eAAW7C,QAAX,EAAqBe,GAArB;AACA4B,QAAI3C,QAAJ,IAAgB+C,KAAKC,GAAL,CAASL,IAAI3C,QAAJ,CAAT,EAAwB2C,IAAI5B,GAAJ,CAAxB,CAAhB;AACA,IAPD,MAQK;AACJ,QAAG+B,cAAc/B,GAAjB,EACC4B,IAAI3C,QAAJ,IAAgB+C,KAAKC,GAAL,CAASL,IAAI3C,QAAJ,CAAT,EAAwB0C,IAAI3B,GAAJ,CAAxB,CAAhB;AACD;AACD;AACD;;AAED,QAAO6B,YAAYK,MAAZ,CAAmB,UAACC,IAAD,EAAU;AACnC,SAAOP,IAAIO,KAAK1C,GAAT,KAAiBkC,IAAIQ,KAAK1C,GAAT,CAAxB;AACA,EAFM,CAAP;AAGA;;AAED;AACA,SAAS2C,WAAT,CAAqBhE,KAArB,EAA4BkC,SAA5B,EAAuC;AACtC,QAAOmB,mCAAmCrD,KAAnC,CAAP;AACA;;QAEOgE,W,GAAAA,W;;;;;;;;;;;;;ACzFR;;;;;;AAEA,SAASC,cAAT,CAAyBC,QAAzB,EAAmC;AAClC,MAAKA,QAAL,GAAgBA,QAAhB;AACA,MAAKC,IAAL,GAAY,UAAUnE,KAAV,EAAiBmB,KAAjB,EAAwB;AACnC,OAAKiD,eAAL;AACA,OAAKC,SAAL,CAAerE,KAAf;AACA,OAAKsE,SAAL,CAAetE,KAAf,EAAsBmB,KAAtB;AACA,EAJD;AAKA,MAAKiD,eAAL,GAAuB,YAAY;AAClC,OAAKF,QAAL,CAAcK,SAAd,GAA0B,EAA1B;;AAEA,OAAKC,UAAL,GAAkBzB,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,GAAvD,CAAlB;AACA,OAAKwB,UAAL,CAAgBvB,YAAhB,CAA6B,IAA7B,EAAmC,OAAnC;;AAEA,OAAKwB,UAAL,GAAkB1B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,GAAvD,CAAlB;AACA,OAAKyB,UAAL,CAAgBxB,YAAhB,CAA6B,IAA7B,EAAmC,OAAnC;;AAEA,OAAKiB,QAAL,CAAc1B,WAAd,CAA0B,KAAKiC,UAA/B;AACA,OAAKP,QAAL,CAAc1B,WAAd,CAA0B,KAAKgC,UAA/B;AACA,EAXD;;AAaA,MAAKH,SAAL,GAAiB,UAAUrE,KAAV,EAAiB;AACjC,OAAI,IAAI4B,GAAR,IAAgB5B,KAAhB,EAAsB;AACrB,OAAI0E,SAAS3B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,QAAvD,CAAb;AACA0B,UAAOzB,YAAP,CAAoB,IAApB,EAA0BjD,MAAM4B,GAAN,EAAWiB,CAArC;AACA6B,UAAOzB,YAAP,CAAoB,IAApB,EAA0BjD,MAAM4B,GAAN,EAAWkB,CAArC;AACA,OAAG9C,MAAM4B,GAAN,EAAWxB,IAAX,KAAoB,SAAvB,EAAkC;AACjCsE,WAAOzB,YAAP,CAAoB,kBAApB,EAAwC,GAAxC;AACA;AACDyB,UAAOzB,YAAP,CAAoB,QAApB,EAA8B,OAA9B;AACAyB,UAAOzB,YAAP,CAAoB,cAApB,EAAoC,CAApC;;AAEA,OAAIjD,MAAM4B,GAAN,EAAWxB,IAAX,KAAoB,UAAxB,EAAoC;AACnCsE,WAAOzB,YAAP,CAAoB,MAApB,EAA4B,OAA5B;AACAyB,WAAOzB,YAAP,CAAoB,GAApB,EAAyB,CAAzB;AACA,IAHD,MAGO;AACNyB,WAAOzB,YAAP,CAAoB,MAApB,EAA4B,OAA5B;AACAyB,WAAOzB,YAAP,CAAoB,GAApB,EAAyB,EAAzB;AACA;AACD,QAAKuB,UAAL,CAAgBhC,WAAhB,CAA4BkC,MAA5B;;AAEA,OAAI1E,MAAM4B,GAAN,EAAWxB,IAAX,KAAoB,UAAxB,EAAoC;AACnC,QAAIwC,OAAOG,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAX;AACAJ,SAAKK,YAAL,CAAkB,GAAlB,EAAuBjD,MAAM4B,GAAN,EAAWiB,CAAX,GAAa,CAApC;AACAD,SAAKK,YAAL,CAAkB,GAAlB,EAAuBjD,MAAM4B,GAAN,EAAWkB,CAAX,GAAa,CAApC;AACAF,SAAKK,YAAL,CAAkB,MAAlB,EAA0B,OAA1B;AACAL,SAAK2B,SAAL,GAAgB3C,GAAhB;AACA,SAAK4C,UAAL,CAAgBhC,WAAhB,CAA4BI,IAA5B;AACA;AACD;AACD,EA7BD;;AA+BA,MAAK0B,SAAL,GAAiB,UAAUtE,KAAV,EAAiBmB,KAAjB,EAAwB;AACxC,OAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIQ,MAAMP,MAA1B,EAAkCD,GAAlC,EAAuC;AACtC,OAAIgE,OAAO5B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAX;AACA2B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAMmB,MAAMR,CAAN,EAASS,KAAf,EAAsByB,CAA9C;AACA8B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAMmB,MAAMR,CAAN,EAASS,KAAf,EAAsB0B,CAA9C;AACA6B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAMmB,MAAMR,CAAN,EAASU,GAAf,EAAoBwB,CAA5C;AACA8B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAMmB,MAAMR,CAAN,EAASU,GAAf,EAAoByB,CAA5C;AACA6B,QAAK1B,YAAL,CAAkB,QAAlB,EAA4B,OAA5B;AACA0B,QAAK1B,YAAL,CAAkB,cAAlB,EAAkC,CAAlC;AACA,QAAKwB,UAAL,CAAgBjC,WAAhB,CAA4BmC,IAA5B;AACA;AACD,EAXD;;AAaA,MAAKC,aAAL,GAAqB,UAAUzD,KAAV,EAAiB;AACrC,OAAK0D,cAAL,GAAsB9B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,GAAvD,CAAtB;AACA,OAAKkB,QAAL,CAAcY,YAAd,CAA2B,KAAKD,cAAhC,EAAgD,KAAKX,QAAL,CAAca,QAAd,CAAuB,CAAvB,CAAhD;AACA,OAAK,IAAIpE,IAAI,CAAb,EAAgBA,IAAIQ,MAAMP,MAA1B,EAAkCD,GAAlC,EAAuC;AACtC,OAAIgE,OAAO5B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAX;AACA2B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwB9B,MAAMR,CAAN,EAASS,KAAT,CAAeyB,CAAvC;AACA8B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwB9B,MAAMR,CAAN,EAASS,KAAT,CAAe0B,CAAvC;AACA6B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwB9B,MAAMR,CAAN,EAASU,GAAT,CAAawB,CAArC;AACA8B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwB9B,MAAMR,CAAN,EAASU,GAAT,CAAayB,CAArC;AACA6B,QAAK1B,YAAL,CAAkB,kBAAlB,EAAsC,GAAtC;AACA0B,QAAK1B,YAAL,CAAkB,QAAlB,EAA4B,OAA5B;AACA0B,QAAK1B,YAAL,CAAkB,cAAlB,EAAkC,CAAlC;AACA,QAAK4B,cAAL,CAAoBrC,WAApB,CAAgCmC,IAAhC;AACA;AACD,EAdD;AAeA;;kBAEcV,c;;;;;;;;;;;;;ACnFf;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,SAASe,oBAAT,CAA+Bd,QAA/B,EAAyC;AACxC,MAAKA,QAAL,GAAgBA,QAAhB;AACA,MAAKe,aAAL,GAAqB,UAAUC,KAAV,EAAiB;AACrC,MAAI9B,UAAU,8BAAY8B,MAAMlF,KAAlB,CAAd;AACAkF,QAAMhE,WAAN,CAAkBkC,OAAlB;AACA,MAAI1B,aAAawD,MAAMzD,sBAAN,EAAjB;AACA,OAAK,IAAId,IAAI,CAAb,EAAgBA,IAAIe,WAAWd,MAA/B,EAAuCD,GAAvC,EAA4C;AAC3C,QAAKwE,cAAL,CAAoBzD,WAAWf,CAAX,CAApB;AACA;AACD,EAPD;;AASA;AACA,MAAKwE,cAAL,GAAsB,UAAUD,KAAV,EAAiB;AACtC,MAAIE,OAAO,KAAKC,QAAL,CAAcH,KAAd,CAAX;AACA,MAAIE,KAAKE,IAAL,CAAU1E,MAAV,IAAoB,CAAxB,EAA2B,OAFW,CAEH;AACnC,MAAI2E,cAAc,2BAAlB;AACAA,cAAYC,kBAAZ,CAA+BJ,KAAKE,IAApC;;AAEA,MAAIG,iBAAiB,6BAAmBvB,QAAnB,CAArB;AACAuB,iBAAetB,IAAf,CAAoBoB,YAAYvF,KAAhC,EAAuCuF,YAAYpE,KAAnD;AACA+D,QAAMhE,WAAN,CAAkBkE,KAAKjE,KAAvB,EARsC,CAQP;;AAE/B,MAAIuE,WAAW,KAAKC,YAAL,CAAkBT,KAAlB,EAAyBK,YAAYK,UAArC,CAAf,CAAgE;AAChE,MAAIC,cAAc,EAAlB;AACA;AACA,MAAIC,KAAJ;;AAEA,SAAOJ,SAAS9E,MAAT,IAAmB,CAA1B,EAA6B;AAC5B,QAAKmF,0BAAL,CAAgCL,QAAhC,EAA0CH,YAAYS,MAAtD;AACAN,YAASO,IAAT,CAAc,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACrC,WAAOD,SAASE,UAAT,GAAsBD,SAASC,UAA/B,GAA4C,CAA5C,GAAgD,CAAC,CAAxD;AACA,IAFD;;AAIA;AACA,OAAIV,SAAS,CAAT,EAAYU,UAAZ,KAA2B,CAA/B,EAAkC;AACjCP,gBAAY7D,IAAZ,CAAiB0D,SAAS,CAAT,CAAjB;AACAA,aAASW,MAAT,CAAgB,CAAhB,EAAmB,CAAnB;AACA;AACA;;AAEDP,WAAQ,KAAKQ,SAAL,CAAeZ,SAAS,CAAT,CAAf,EAA4BA,SAAS,CAAT,EAAYa,YAAZ,CAAyB,CAAzB,CAA5B,EAAyDb,SAAS,CAAT,EAAYa,YAAZ,CAAyB,CAAzB,CAAzD,CAAR;AACA;AACAb,YAAS,CAAT,EAAYc,QAAZ,CAAqBP,IAArB,CAA0B,UAACQ,MAAD,EAASC,MAAT,EAAoB;AAC7C,WAAOD,OAAOE,OAAP,KAAmB,IAAnB,GAA0B,CAA1B,GAA6B,CAAC,CAArC;AACA,IAFD;AAGApB,eAAYqB,QAAZ,CAAqBd,KAArB,EAA4BJ,SAAS,CAAT,EAAYc,QAAZ,CAAqB,CAArB,CAA5B;;AAEA,QAAKK,WAAL,CAAiB3B,KAAjB,EAAwBY,KAAxB;;AAEAJ,cAAW,KAAKC,YAAL,CAAkBT,KAAlB,EAAyBK,YAAYK,UAArC,CAAX;;AAEAH,kBAAetB,IAAf,CAAoBoB,YAAYvF,KAAhC,EAAuCuF,YAAYpE,KAAnD;AACA;AAED,EA1CD;;AA4CA;AACA,MAAKkE,QAAL,GAAgB,UAAUH,KAAV,EAAiB;AAChC,MAAI4B,gBAAgB,CAApB;AACA,MAAIC,aAAa,EAAjB;;AAEA,OAAK,IAAInF,GAAT,IAAgBsD,MAAMlF,KAAtB,EAA6B;AAC5B,OAAIsF,OAAO,EAAX;AACAA,QAAKtD,IAAL,CAAUJ,GAAV;;AAEAoF,yBAAsB1B,KAAK2B,KAAL,EAAtB,EAAoCrF,GAApC,EAAyCsD,KAAzC;AACA;;AAED,SAAOgC,kCAAkCH,UAAlC,CAAP;;AAEA,WAASC,qBAAT,CAA+B1B,IAA/B,EAAqCpF,QAArC,EAA+CgF,KAA/C,EAAsD;AACrD,QAAK,IAAItD,GAAT,IAAgBsD,MAAMlF,KAAN,CAAYE,QAAZ,EAAsBG,SAAtC,EAAiD;AAChD;AACA,QAAI8G,aAAaC,cAAc9B,IAAd,EAAoB1D,GAApB,CAAjB;AACA,QAAIuF,aAAaL,aAAjB,EAAgC;AAC/BA,qBAAgBK,UAAhB;AACAJ,kBAAazB,KAAK2B,KAAL,EAAb;AACA,KAHD,MAIK,IAAIE,eAAe,CAAnB,EAAsB;AAC1B,SAAIE,UAAU/B,KAAK2B,KAAL,EAAd;AACAI,aAAQrF,IAAR,CAAaJ,GAAb;AACAoF,2BAAsBK,OAAtB,EAA+BzF,GAA/B,EAAoCsD,KAApC;AACA;AACD;;AAED,YAASkC,aAAT,CAAuB9B,IAAvB,EAA6BpF,QAA7B,EAAuC;AACtC,SAAK,IAAIS,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAzB,EAAiCD,GAAjC,EAAsC;AACrC,SAAI2E,KAAK3E,CAAL,MAAYT,QAAhB,EAA0B,OAAOoF,KAAK1E,MAAL,GAAcD,CAArB;AAC1B;AACD,WAAO,CAAP;AACA;AACD;;AAED,WAASuG,iCAAT,CAA2CH,UAA3C,EAAuD;AACtD,OAAI3B,OAAO,EAAX;;AAEA,QAAK,IAAIzE,IAAI,CAAb,EAAgBA,IAAIoG,WAAWnG,MAAX,GAAoB,CAAxC,EAA2CD,GAA3C,EAAgD;AAC/CyE,SAAKpD,IAAL,CAAU;AACTZ,YAAO2F,WAAWpG,CAAX,CADE;AAETU,UAAK0F,WAAWpG,IAAI,CAAf;AAFI,KAAV;AAIA;AACDyE,QAAKpD,IAAL,CAAU;AACTZ,WAAO2F,WAAW,CAAX,CADE;AAET1F,SAAK0F,WAAWA,WAAWnG,MAAX,GAAoB,CAA/B;AAFI,IAAV;;AAKA,UAAO;AACN0E,UAAMyB,UADA;AAEN5F,WAAOiE;AAFD,IAAP;AAIA;AACD,EAvDD;;AAyDA;AACA,MAAKO,YAAL,GAAoB,UAAUT,KAAV,EAAiBU,UAAjB,EAA6B;AAChD,MAAI0B,eAAe,EAAnB;AACA,MAAI5B,WAAW,EAAf;;AAEA,OAAK,IAAI9D,GAAT,IAAgBsD,MAAMlF,KAAtB,EAA6B;AAC5B,OAAIsH,aAAa1F,GAAb,CAAJ,EAAuB;AACvB0F,gBAAa1F,GAAb,IAAoB,IAApB;;AAEA,OAAI2F,SAAS3B,UAAT,EAAqBhE,GAArB,CAAJ,EAA+B;AAC9B4F,qBAAiB5F,GAAjB,EAAsBsD,KAAtB,EAA6BQ,QAA7B,EAAuCE,UAAvC;AACA;AACA;AACD,OAAI6B,UAAU;AACblB,kBAAc,EADD;AAEbrB,WAAO;AAFM,IAAd;AAIAuC,WAAQvC,KAAR,CAAcjF,OAAd,CAAsB2B,GAAtB;AACA8F,iBAAcD,OAAd,EAAuB7F,GAAvB,EAA4BgE,UAA5B,EAAwCV,KAAxC;AACAQ,YAAS1D,IAAT,CAAcyF,OAAd;AACA;;AAED,SAAO/B,QAAP;;AAEA,WAAS6B,QAAT,CAAmBI,KAAnB,EAA0B/F,GAA1B,EAA+B;AAC9B,QAAK,IAAIjB,IAAI,CAAb,EAAgBA,IAAIgH,MAAM/G,MAA1B,EAAkCD,GAAlC,EAAuC;AACtC,QAAIgH,MAAMhH,CAAN,MAAaiB,GAAjB,EAAsB,OAAO,IAAP;AACtB;;AAED,UAAO,KAAP;AACA;;AAED,WAAS4F,gBAAT,CAA2BxG,IAA3B,EAAiCkE,KAAjC,EAAwCQ,QAAxC,EAAkDE,UAAlD,EAA8D;AAC7D,QAAK,IAAIgC,QAAT,IAAqB1C,MAAMlF,KAAN,CAAYgB,IAAZ,EAAkBX,SAAvC,EAAkD;AAChD,QAAIkH,SAAS3B,UAAT,EAAqBgC,QAArB,KAAkC,CAACN,aAAaM,QAAb,CAAvC,EAA+D;AAC9D,SAAIH,UAAU;AACblB,oBAAc,EADD;AAEbrB,aAAQ;AAFK,MAAd;AAIAuC,aAAQvC,KAAR,CAAcjF,OAAd,CAAsBe,IAAtB;AACAyG,aAAQlB,YAAR,CAAqBvE,IAArB,CAA0BhB,IAA1B;;AAEAyG,aAAQvC,KAAR,CAAcjF,OAAd,CAAsB2H,QAAtB;AACAH,aAAQlB,YAAR,CAAqBvE,IAArB,CAA0B4F,QAA1B;;AAEAH,aAAQvC,KAAR,CAAc5E,OAAd,CAAsBU,IAAtB,EAA4B4G,QAA5B;AACAlC,cAAS1D,IAAT,CAAcyF,OAAd;AACA;AACD;AACF;;AAED;AACA,WAASC,aAAT,CAAuBD,OAAvB,EAAgCzG,IAAhC,EAAsC4E,UAAtC,EAAkDV,KAAlD,EAAyD;AACxDoC,gBAAatG,IAAb,IAAqB,IAArB;AACA,QAAK,IAAI4G,QAAT,IAAqB1C,MAAMlF,KAAN,CAAYgB,IAAZ,EAAkBX,SAAvC,EAAkD;;AAEjDoH,YAAQvC,KAAR,CAAcjF,OAAd,CAAsB2H,QAAtB;AACAH,YAAQvC,KAAR,CAAc5E,OAAd,CAAsBU,IAAtB,EAA4B4G,QAA5B;;AAEA,QAAIL,SAAS3B,UAAT,EAAqBgC,QAArB,CAAJ,EAAoC;AACnCH,aAAQlB,YAAR,CAAqBvE,IAArB,CAA0B4F,QAA1B;AACA;AACA;;AAED,QAAI,CAACN,aAAaM,QAAb,CAAL,EAA6B;AAC5BF,mBAAcD,OAAd,EAAuBG,QAAvB,EAAiChC,UAAjC,EAA6CV,KAA7C;AACA;AACD;AACD;AACD,EApED;;AAsEA,MAAKa,0BAAL,GAAkC,UAAUL,QAAV,EAAoBM,MAApB,EAA4B;AAC7D,OAAK,IAAIrF,IAAI,CAAb,EAAgBA,IAAI+E,SAAS9E,MAA7B,EAAqCD,GAArC,EAA0C;AACzC+E,YAAS/E,CAAT,EAAY6F,QAAZ,GAAuB,EAAvB;AACA,OAAIJ,aAAa,CAAjB;AACA,QAAK,IAAIyB,IAAI,CAAb,EAAgBA,IAAI7B,OAAOpF,MAA3B,EAAmCiH,GAAnC,EAAwC;AACvC,QAAIC,YAAYpC,SAAS/E,CAAT,EAAY4F,YAAxB,EAAsCP,OAAO6B,CAAP,EAAUzC,IAAhD,CAAJ,EAA2D;AAC1DgB;AACAV,cAAS/E,CAAT,EAAY6F,QAAZ,CAAqBxE,IAArB,CAA0BgE,OAAO6B,CAAP,CAA1B;AACA;AACD;AACDnC,YAAS/E,CAAT,EAAYyF,UAAZ,GAAyBA,UAAzB,CATyC,CASJ;AACrC;;AAED,WAAS0B,WAAT,CAAqBvB,YAArB,EAAmCnB,IAAnC,EAAyC;AACxC,QAAK,IAAIzE,IAAI,CAAb,EAAgBA,IAAI4F,aAAa3F,MAAjC,EAAyCD,GAAzC,EAA8C;AAC7C,QAAIoH,eAAe,KAAnB;AACA,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAIzC,KAAKxE,MAAzB,EAAiCiH,GAAjC,EAAsC;AACrC,SAAItB,aAAa5F,CAAb,MAAoByE,KAAKyC,CAAL,CAAxB,EAAiC;AAChCE,qBAAe,IAAf;AACA;AACA;AACD;AACD,QAAI,CAACA,YAAL,EAAmB;AAClB,YAAO,KAAP;AACA;AACD;AACD,UAAO,IAAP;AACA;AACD,EA5BD;;AA8BA;AACA,MAAKzB,SAAL,GAAiB,UAAUmB,OAAV,EAAmBO,KAAnB,EAA0B3G,GAA1B,EAA+B;AAC/C,MAAIiE,OAAO,EAAX;AACAA,OAAKtD,IAAL,CAAUgG,KAAV;;AAEA,MAAIV,eAAe,EAAnB;AACA,MAAIjG,QAAQlB,SAAZ,EAAuB;AACtB,UAAO8H,WAAWR,OAAX,EAAoBtH,SAApB,EAA+B6H,KAA/B,EAAsCA,KAAtC,EAA6C1C,IAA7C,CAAP;AACA;AACD,SAAO2C,WAAWR,OAAX,EAAoBtH,SAApB,EAA+B6H,KAA/B,EAAsC3G,GAAtC,EAA2CiE,IAA3C,CAAP;;AAEA,WAAS2C,UAAT,CAAoBR,OAApB,EAA6BS,IAA7B,EAAmCC,OAAnC,EAA4C9G,GAA5C,EAAiDiE,IAAjD,EAAuD;AACtD,QAAK,IAAI1D,GAAT,IAAgB6F,QAAQvC,KAAR,CAAclF,KAAd,CAAoBmI,OAApB,EAA6B9H,SAA7C,EAAwD;AACvD,QAAIuB,QAAQsG,IAAZ,EAAkB;AAClB,QAAIZ,aAAa1F,GAAb,CAAJ,EAAuB;AACvB,QAAIA,QAAQP,GAAZ,EAAiB;AAChBiE,UAAKtD,IAAL,CAAUX,GAAV;AACA,YAAOiE,IAAP;AACA;;AAEDgC,iBAAa1F,GAAb,IAAoB,IAApB;AACA,QAAIyF,UAAU/B,KAAK2B,KAAL,EAAd;AACAI,YAAQrF,IAAR,CAAaJ,GAAb;AACA,QAAIwG,MAAMH,WAAWR,OAAX,EAAoBU,OAApB,EAA6BvG,GAA7B,EAAkCP,GAAlC,EAAuCgG,OAAvC,CAAV;AACA,QAAIe,OAAO,EAAX,EAAe;AACd,YAAOA,GAAP;AACA;AACD;AACD,UAAO,EAAP;AACA;AACD,EA7BD;;AA+BA,MAAKvB,WAAL,GAAmB,UAAU3B,KAAV,EAAiBY,KAAjB,EAAwB;AAC1C,MAAIuC,gBAAgB,EAApB;AACA,OAAK,IAAI1H,IAAI,CAAb,EAAgBA,IAAImF,MAAMlF,MAAN,GAAe,CAAnC,EAAsCD,GAAtC,EAA2C;AAC1C0H,iBAAcrG,IAAd,CAAmB;AAClBZ,WAAO0E,MAAMnF,CAAN,CADW;AAElBU,SAAKyE,MAAMnF,IAAI,CAAV;AAFa,IAAnB;AAIA;;AAED0H,gBAAcrG,IAAd,CAAmB;AAClBZ,UAAO0E,MAAM,CAAN,CADW;AAElBzE,QAAKyE,MAAMA,MAAMlF,MAAN,GAAe,CAArB;AAFa,GAAnB;;AAKAsE,QAAM5D,iCAAN,CAAwC+G,aAAxC;AACA,EAfD;AAgBA;;kBAEcrD,oB;;;;;;;;;;;;AC9Qf,IAAIhF,KAAJ;AACA,IAAImB,KAAJ;;AAEA;AACA,IAAImH,IAAI,GAAR;AACA;AACA,IAAIC,KAAK,CAAT;AACA;AACA,IAAIC,KAAK,MAAT;;AAEA,IAAIC,QAAQ,GAAZ;;AAEA,SAASC,KAAT,CAAelE,UAAf,EAA2BC,UAA3B,EAAsC;AACrCD,YAAWD,SAAX,GAAqB,EAArB;AACAE,YAAWF,SAAX,GAAqB,EAArB;AACA;AACD,SAASoE,gBAAT,CAA0BjI,SAA1B,EAAoC;AACnCV,SAAM,EAAN;AACAmB,SAAM,EAAN;AACA,MAAI,IAAIR,IAAI,CAAZ,EAAeA,IAAGD,UAAUE,MAA5B,EAAoCD,GAApC,EACA;AACC,MAAKD,UAAUC,CAAV,KAAc,EAAnB,EACA;AACC,OAAIE,WAAWH,UAAUC,CAAV,EAAaG,KAAb,CAAmB,IAAnB,CAAf;AACAd,SAAMa,SAAS,CAAT,CAAN,IAAqB,EAAC+H,MAAM/H,SAAS,CAAT,CAAP,EAArB;AACA,OAAGA,SAAS,CAAT,CAAH,EACA;AACCb,UAAMa,SAAS,CAAT,CAAN,IAAqB,EAAC+H,MAAM/H,SAAS,CAAT,CAAP,EAArB;AACA,QAAG,CAACM,MAAMN,SAAS,CAAT,CAAN,CAAJ,EACCM,MAAMN,SAAS,CAAT,CAAN,IAAmB,EAAnB;AACDM,UAAMN,SAAS,CAAT,CAAN,EAAmBA,SAAS,CAAT,CAAnB,IAAgC,IAAhC;;AAEA;AACA,QAAG,CAACM,MAAMN,SAAS,CAAT,CAAN,CAAJ,EACCM,MAAMN,SAAS,CAAT,CAAN,IAAmB,EAAnB;AACDM,UAAMN,SAAS,CAAT,CAAN,EAAmBA,SAAS,CAAT,CAAnB,IAAgC,IAAhC;AACA;AACD;AACD;AACD;AACD,SAASgI,wBAAT,CAAkCC,MAAlC,EAA0CC,KAA1C,EAAgD;AAC/C,MAAI,IAAInH,GAAR,IAAe5B,KAAf,EAAqB;AACpBA,QAAM4B,GAAN,EAAWiB,CAAX,GAAce,KAAKoF,KAAL,CAAWpF,KAAKqF,MAAL,MAAiBF,QAAQ,CAAR,GAAY,CAA7B,CAAX,IAA8C,CAA5D;AACA/I,QAAM4B,GAAN,EAAWkB,CAAX,GAAcc,KAAKoF,KAAL,CAAWpF,KAAKqF,MAAL,MAAiBH,SAAS,CAAT,GAAa,CAA9B,CAAX,IAA+C,CAA7D;AACA;AACD;AACD,SAASI,SAAT,CAAmB1E,UAAnB,EAA+BC,UAA/B,EAA0C;AACzC,MAAI,IAAI7C,GAAR,IAAgB5B,KAAhB,EAAsB;AACrB,MAAI0E,SAAS3B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,QAAvD,CAAb;AACA0B,SAAOzB,YAAP,CAAoB,IAApB,EAA0BjD,MAAM4B,GAAN,EAAWiB,CAArC;AACA6B,SAAOzB,YAAP,CAAoB,IAApB,EAA0BjD,MAAM4B,GAAN,EAAWkB,CAArC;AACA4B,SAAOzB,YAAP,CAAoB,GAApB,EAAyB,EAAzB;AACAyB,SAAOzB,YAAP,CAAoB,QAApB,EAA8B,OAA9B;AACAyB,SAAOzB,YAAP,CAAoB,cAApB,EAAoC,CAApC;AACAyB,SAAOzB,YAAP,CAAoB,MAApB,EAA4B,OAA5B;AACAuB,aAAWhC,WAAX,CAAuBkC,MAAvB;;AAEA,MAAI9B,OAAOG,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAX;AACAJ,OAAKK,YAAL,CAAkB,GAAlB,EAAuBjD,MAAM4B,GAAN,EAAWiB,CAAX,GAAa,CAApC;AACAD,OAAKK,YAAL,CAAkB,GAAlB,EAAuBjD,MAAM4B,GAAN,EAAWkB,CAAX,GAAa,CAApC;AACAF,OAAKK,YAAL,CAAkB,MAAlB,EAA0B,OAA1B;AACAL,OAAK2B,SAAL,GAAgB3C,GAAhB;AACA4C,aAAWhC,WAAX,CAAuBI,IAAvB;AACA;;AAED,MAAI,IAAIH,IAAR,IAAgBtB,KAAhB,EAAsB;AACrB,OAAI,IAAIwB,IAAR,IAAgBxB,MAAMsB,IAAN,CAAhB,EAA4B;AAC3B,OAAIkC,OAAO5B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAX;AACA2B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAMyC,IAAN,EAAYI,CAApC;AACA8B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAMyC,IAAN,EAAYK,CAApC;AACA6B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAM2C,IAAN,EAAYE,CAApC;AACA8B,QAAK1B,YAAL,CAAkB,IAAlB,EAAwBjD,MAAM2C,IAAN,EAAYG,CAApC;AACA6B,QAAK1B,YAAL,CAAkB,QAAlB,EAA4B,OAA5B;AACA0B,QAAK1B,YAAL,CAAkB,cAAlB,EAAkC,CAAlC;AACAwB,cAAWjC,WAAX,CAAuBmC,IAAvB;AACA;AACD;AACD;AACD,SAASwE,QAAT,CAAkBC,KAAlB,EAAyBC,KAAzB,EAA+B;AAC9B,KAAIxG,IAAI7C,MAAMoJ,KAAN,EAAavG,CAAb,GAAe7C,MAAMqJ,KAAN,EAAaxG,CAApC;AACA,KAAIC,IAAI9C,MAAMoJ,KAAN,EAAatG,CAAb,GAAe9C,MAAMqJ,KAAN,EAAavG,CAApC;AACA,QAAOc,KAAK0F,IAAL,CAAUzG,IAAEA,CAAF,GAAMC,IAAEA,CAAlB,CAAP;AACA;AACD,SAASyG,0BAAT,GAAqC;AACpC,MAAI,IAAIC,CAAR,IAAaxJ,KAAb,EAAmB;AAClB,MAAIyJ,IAAE,CAAN;AACA,OAAI,IAAIC,CAAR,IAAavI,MAAMqI,CAAN,CAAb,EAAsB;AACrB,OAAIrI,MAAMqI,CAAN,EAASE,CAAT,KAAavJ,SAAjB,EAA2B;AAC3B,OAAIwJ,IAAIR,SAASK,CAAT,EAAWE,CAAX,CAAR;AACA,OAAIC,KAAK,CAAT,EAAY;AACZF,QAAGlB,MAAMoB,IAAIrB,CAAV,KAAgBtI,MAAM0J,CAAN,EAAS7G,CAAT,GAAa7C,MAAMwJ,CAAN,EAAS3G,CAAtC,IAA2C8G,CAA9C;AACA;AACD,MAAIC,IAAE,CAAN;AACA,OAAI,IAAIF,CAAR,IAAa1J,KAAb,EAAmB;AAClB;AACA,OAAG0J,KAAGF,CAAN,EAAQ;AACR,OAAIG,IAAIR,SAASK,CAAT,EAAWE,CAAX,CAAR;AACA,OAAIC,KAAK,CAAT,EAAY;AACZC,QAAGpB,MAAMxI,MAAMwJ,CAAN,EAAS3G,CAAT,GAAa7C,MAAM0J,CAAN,EAAS7G,CAA5B,KAAkC8G,IAAIA,CAAtC,IAA4CA,CAA/C;AACA;AACD3J,QAAMwJ,CAAN,EAASK,EAAT,GAAYJ,IAAEG,CAAd;AACA;AACD;AACD,SAASE,0BAAT,GAAqC;AACpC,MAAI,IAAIN,CAAR,IAAaxJ,KAAb,EAAmB;AAClB,MAAIyJ,IAAE,CAAN;AACA,OAAI,IAAIC,CAAR,IAAavI,MAAMqI,CAAN,CAAb,EAAsB;AACrB,OAAIrI,MAAMqI,CAAN,EAASE,CAAT,KAAavJ,SAAjB,EAA2B;AAC3B,OAAIwJ,IAAIR,SAASK,CAAT,EAAWE,CAAX,CAAR;AACA,OAAIC,KAAK,CAAT,EAAY;AACZF,QAAGlB,MAAMoB,IAAIrB,CAAV,KAAgBtI,MAAM0J,CAAN,EAAS5G,CAAT,GAAa9C,MAAMwJ,CAAN,EAAS1G,CAAtC,IAA2C6G,CAA9C;AACA;AACD,MAAIC,IAAE,CAAN;AACA,OAAI,IAAIF,CAAR,IAAa1J,KAAb,EAAmB;AAClB;AACA,OAAG0J,KAAGF,CAAN,EAAQ;AACR,OAAIG,IAAIR,SAASK,CAAT,EAAWE,CAAX,CAAR;AACA,OAAIC,KAAK,CAAT,EAAY;AACZC,QAAGpB,MAAMxI,MAAMwJ,CAAN,EAAS1G,CAAT,GAAa9C,MAAM0J,CAAN,EAAS5G,CAA5B,KAAkC6G,IAAIA,CAAtC,IAA6CA,CAAhD;AACA;AACD3J,QAAMwJ,CAAN,EAASO,EAAT,GAAaN,IAAIG,CAAjB;AACA;AACD;AACD,SAASI,YAAT,GAAuB;AACtB,MAAI,IAAIhJ,IAAR,IAAgBhB,KAAhB,EAAsB;AACrBA,QAAMgB,IAAN,EAAY6B,CAAZ,IAAe4F,QAAMzI,MAAMgB,IAAN,EAAY6I,EAAjC;AACA7J,QAAMgB,IAAN,EAAY8B,CAAZ,IAAe2F,QAAMzI,MAAMgB,IAAN,EAAY+I,EAAjC;AACA;AACA;AACA,MAAI/J,MAAMgB,IAAN,EAAY6B,CAAZ,GAAgB,EAApB,EAAwB7C,MAAMgB,IAAN,EAAY6B,CAAZ,GAAgB,EAAhB;AACxB,MAAI7C,MAAMgB,IAAN,EAAY8B,CAAZ,GAAgB,EAApB,EAAwB9C,MAAMgB,IAAN,EAAY8B,CAAZ,GAAgB,EAAhB;AACxB;AACD;AACD,SAASmH,SAAT,CAAmBvJ,SAAnB,EAA8BwJ,OAA9B,EAAuCpB,MAAvC,EAA+CC,KAA/C,EAAsDvE,UAAtD,EAAkEC,UAAlE,EAA6E;AAC5E,KAAGyF,OAAH,EACCC,cAAcD,OAAd;AACDxB,OAAMlE,UAAN,EAAkBC,UAAlB;AACAkE,kBAAiBjI,SAAjB;AACAmI,0BAAyBC,MAAzB,EAAiCC,KAAjC;AACAG,WAAU1E,UAAV,EAAsBC,UAAtB;AACA;AACD,SAAS2F,oBAAT,CAA8B5F,UAA9B,EAA0CC,UAA1C,EAAqD;AACpD8E;AACAO;AACAE;AACAtB,OAAMlE,UAAN,EAAkBC,UAAlB;AACAyE,WAAU1E,UAAV,EAAsBC,UAAtB;AACA;AACD,SAAS4F,kBAAT,CAA4BH,OAA5B,EAAqC1F,UAArC,EAAiDC,UAAjD,EAA4D;AAC3D;;AAEAyF,WAAUI,YAAYF,oBAAZ,EAAkC,GAAlC,EAAuC5F,UAAvC,EAAmDC,UAAnD,CAAV;AACA,QAAOyF,OAAP;AACA;QACOD,S,GAAAA,S;QAAWG,oB,GAAAA,oB;QAAsBC,kB,GAAAA,kB;;;;;;AC1JzC,yC;;;;;;;;;ACAA;;AAEA;;;;AACA;;AACA;;;;AAEA;;;;AAEA,IAAIvB,SAAS,GAAb;AACA,IAAIC,QAAQ,IAAZ;;AAEA,IAAImB,OAAJ;;AAEA,IAAIK,YAAYxH,SAASyH,cAAT,CAAwB,WAAxB,CAAhB;AACAD,UAAUtH,YAAV,CAAuB,QAAvB,EAAiC6F,SAAS,IAA1C;AACAyB,UAAUtH,YAAV,CAAuB,OAAvB,EAAgC8F,QAAQ,IAAxC;AACA;;;;;AAKA;;;;;;;;;;AAUA;;;;;;;;AAQA;;;;AAIAhG,SAASyH,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC;AAIA,IAAIjG,aAAazB,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,GAAvD,CAAjB;AACAwB,WAAWvB,YAAX,CAAwB,IAAxB,EAA8B,OAA9B;;AAEA,IAAIwB,aAAa1B,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,GAAvD,CAAjB;AACAyB,WAAWxB,YAAX,CAAwB,IAAxB,EAA8B,OAA9B;;AAEA,IAAIf,YAAYa,SAASC,eAAT,CAAyB,4BAAzB,EAAuD,GAAvD,CAAhB;;AAEAuH,UAAU/H,WAAV,CAAsBiC,UAAtB;AACA8F,UAAU/H,WAAV,CAAsBgC,UAAtB;AACA+F,UAAU/H,WAAV,CAAsBN,SAAtB;;AAEA,IAAIwI,SAAS3H,SAASyH,cAAT,CAAwB,SAAxB,CAAb;AACAE,OAAOC,gBAAP,CAAwB,OAAxB,EAAiC,YAAW;AAC3C,KAAIjK,YAAYqC,SAASyH,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CG,OAA7C,CAAqD,OAArD,EAA6D,EAA7D,EAAiE9J,KAAjE,CAAuE,GAAvE,CAAhB;AACA,gCAAUJ,SAAV,EAAqBwJ,OAArB,EAA8BpB,MAA9B,EAAsCC,KAAtC,EAA6CvE,UAA7C,EAAyDC,UAAzD;AACA,CAHD;;AAKA,IAAIoG,kBAAkB9H,SAASyH,cAAT,CAAwB,kBAAxB,CAAtB;AACAK,gBAAgBF,gBAAhB,CAAiC,OAAjC,EAA0C,YAAW;AACpD,2CAAqBnG,UAArB,EAAiCC,UAAjC;AACA,CAFD;;AAIA,IAAIqG,YAAY/H,SAASyH,cAAT,CAAwB,qBAAxB,CAAhB;AACAM,UAAUH,gBAAV,CAA2B,OAA3B,EAAoC,YAAW;AAC9CT,WAAU,wCAAmBA,OAAnB,EAA4B1F,UAA5B,EAAwCC,UAAxC,CAAV;AACA,CAFD;;AAIA,IAAIsG,qBAAqBhI,SAASyH,cAAT,CAAwB,cAAxB,CAAzB;;AAEAO,mBAAmBJ,gBAAnB,CAAoC,OAApC,EAA6C,YAAW;AACvD,KAAIjK,YAAYqC,SAASyH,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CG,OAA7C,CAAqD,OAArD,EAA6D,EAA7D,EAAiE9J,KAAjE,CAAuE,GAAvE,CAAhB;;AAEA,KAAIkK,YAAY,6BAAhB;AACAA,WAAUvK,kBAAV,CAA6BC,SAA7B;;AAEA,KAAIuK,uBAAuB,6BAAyBV,SAAzB,CAA3B;AACAU,sBAAqBhG,aAArB,CAAmC+F,SAAnC;AACA,CARD,E;;;;;;;;;;;;;AC7EA;;;;AACA;;;;;;AAEA,IAAME,aAAa;AAClBnC,QAAO,GADW;AAElBD,SAAQ;AAFU,CAAnB;;AAKA,IAAMqC,aAAa,EAAnB;;AAEA,IAAMC,gBAAgB;AACrBC,UAAS;AACRxI,KAAGsI,UADK;AAERrI,KAAGqI,UAFK;AAGR/K,QAAM;AAHE,EADY;AAMrBkL,WAAU;AACTzI,KAAGqI,WAAWnC,KAAX,GAAmBoC,UADb;AAETrI,KAAGqI,UAFM;AAGT/K,QAAM;AAHG,EANW;AAWrBmL,aAAY;AACX1I,KAAGsI,UADQ;AAEXrI,KAAGoI,WAAWpC,MAAX,GAAoBqC,UAFZ;AAGX/K,QAAM;AAHK,EAXS;AAgBrBoL,cAAa;AACZ3I,KAAGqI,WAAWnC,KAAX,GAAmBoC,UADV;AAEZrI,KAAGoI,WAAWpC,MAAX,GAAoBqC,UAFX;AAGZ/K,QAAM;AAHM;AAhBQ,CAAtB;;AAuBA,IAAMqL,SAAS;AACd5I,IAAG,GADW;AAEdC,IAAG;AAFW,CAAf;;AAKA,IAAI4I,oBAAoB,CAAxB;;AAEA,SAASC,WAAT,GAAwB;AAAC;AACxB,MAAKnG,kBAAL,GAA0B,UAAUJ,IAAV,EAAgB;AACzC,OAAKpF,KAAL,GAAa,EAAb;AACA,OAAKmB,KAAL,GAAa,EAAb;AACA,OAAKyE,UAAL,GAAkBR,KAAK6B,KAAL,EAAlB;;AAEA,MAAI2E,SAASxG,KAAKxE,MAAL,GAAc,EAA3B;AACAgL,WAAShI,KAAKC,GAAL,CAAS+H,MAAT,EAAiB,GAAjB,CAAT;;AAEA,MAAIC,QAAS,IAAIjI,KAAKkI,EAAV,GAAgB1G,KAAKxE,MAAjC;;AAEA,OAAK,IAAID,IAAI,CAAb,EAAgBA,IAAIyE,KAAKxE,MAAzB,EAAiCD,GAAjC,EAAsC;AACrC,QAAKX,KAAL,CAAWoF,KAAKzE,CAAL,CAAX,IAAsB;AACrBkC,OAAG4I,OAAO5I,CAAP,GAAW+I,SAAShI,KAAKmI,GAAL,CAASpL,IAAIkL,KAAb,CADF;AAErB/I,OAAG2I,OAAO3I,CAAP,GAAW8I,SAAShI,KAAKoI,GAAL,CAASrL,IAAIkL,KAAb,CAFF;AAGrBzL,UAAM;AAHe,IAAtB;AAKA;;AAED,OAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIyE,KAAKxE,MAAL,GAAc,CAAlC,EAAqCD,GAArC,EAA0C;AACzC,QAAKQ,KAAL,CAAWa,IAAX,CAAgB;AACfZ,WAAOgE,KAAKzE,CAAL,CADQ;AAEfU,SAAK+D,KAAKzE,IAAI,CAAT;AAFU,IAAhB;AAIA;;AAED,OAAKQ,KAAL,CAAWa,IAAX,CAAgB;AACfZ,UAAOgE,KAAK,CAAL,CADQ;AAEf/D,QAAK+D,KAAKA,KAAKxE,MAAL,GAAc,CAAnB;AAFU,GAAhB;;AAKA;;AAEA,OAAKZ,KAAL,CAAW,SAAX,IAAwBoL,cAAcC,OAAtC;AACA,OAAKrL,KAAL,CAAW,UAAX,IAAyBoL,cAAcE,QAAvC;AACA,OAAKtL,KAAL,CAAW,YAAX,IAA2BoL,cAAcG,UAAzC;AACA,OAAKvL,KAAL,CAAW,aAAX,IAA4BoL,cAAcI,WAA1C;AACA,OAAKxL,KAAL,CAAW,YAAX,IAA2B;AAC1B6C,MAAGqI,WAAWnC,KAAX,GAAmBoC,UADI;AAE1BrI,MAAG,KAAK9C,KAAL,CAAWoF,KAAK,CAAL,CAAX,EAAoBtC,CAFG;AAG1B1C,SAAM;AAHoB,GAA3B;;AAMA,OAAK4F,MAAL,GAAc,EAAd;AACA,OAAKA,MAAL,CAAYhE,IAAZ,CAAiB,oBAAUoD,IAAV,EAAgB,KAAhB,CAAjB;;AAEA,MAAI6G,YAAY7G,KAAK6B,KAAL,EAAhB;AACAgF,YAAUjK,IAAV,CAAeoD,KAAK,CAAL,CAAf;AACA6G,YAAUjK,IAAV,CAAe,YAAf;AACAiK,YAAUjK,IAAV,CAAe,UAAf;AACAiK,YAAUjK,IAAV,CAAe,SAAf;AACAiK,YAAUjK,IAAV,CAAe,YAAf;AACAiK,YAAUjK,IAAV,CAAe,aAAf;AACAiK,YAAUjK,IAAV,CAAe,YAAf;AACA,OAAKgE,MAAL,CAAYhE,IAAZ,CAAiB,oBAAUiK,SAAV,EAAqB,IAArB,CAAjB,EArDyC,CAqDM;AAC/C,EAtDD;;AAwDA,MAAKrF,QAAL,GAAgB,UAAUd,KAAV,EAAiBoG,KAAjB,EAAwB;AACvC,MAAIC,YAAYC,cAAcF,KAAd,EAAqB,KAAKlM,KAA1B,CAAhB;;AAEA,MAAIsF,OAAO+G,sBAAsBvG,KAAtB,EAA6BqG,SAA7B,EAAwCD,MAAM9G,IAA9C,EAAoD,KAAKpF,KAAzD,CAAX;;AAEAsF,SAAOgH,eAAehH,IAAf,EAAqBQ,KAArB,CAAP;;AAEAyG,iBAAejH,IAAf,EAAqB,KAAKtF,KAA1B,EAAiC,KAAKmB,KAAtC;;AAEA;AACA,MAAIqL,gBAAgB,EAApB;AACA,MAAIN,MAAMvF,OAAV,EAAmB;AAClB6F,mBAAgBC,kBAAkBP,MAAM9G,IAAxB,EAA8BE,IAA9B,EAAoC,KAAKtF,KAAzC,CAAhB;AACA;AACD,MAAI0M,YAAYR,MAAMtF,QAAN,CAAetB,KAAKqH,GAAL,CAAS,oBAAY;AACnD,UAAOC,SAAShE,IAAhB;AACA,GAF8B,CAAf,EAEZ4D,aAFY,CAAhB;;AAIA,OAAKxG,MAAL,GAAc,KAAKA,MAAL,CAAYlC,MAAZ,CAAmB,gBAAQ;AACxC,OAAI+I,KAAKC,EAAL,KAAYZ,MAAMY,EAAtB,EAA0B;AACzB,WAAO,KAAP;AACA;AACD,UAAO,IAAP;AACA,GALa,CAAd;;AAOA,OAAK9G,MAAL,CAAYhE,IAAZ,CAAiB0K,UAAU,CAAV,CAAjB;AACA,OAAK1G,MAAL,CAAYhE,IAAZ,CAAiB0K,UAAU,CAAV,CAAjB;;AAEA,WAASN,aAAT,CAAwBF,KAAxB,EAA+BlM,KAA/B,EAAsC;AACrC,OAAImM,YAAY,EAAhB;AACA,OAAIhL,QAAQ4L,iBAAiBb,MAAM9G,IAAvB,EAA6BpF,KAA7B,CAAZ;AACA,OAAIgN,WAAW,EAAf;AACA,OAAI5H,OAAO8G,MAAM9G,IAAN,CAAW6B,KAAX,EAAX;AACA,QAAK,IAAItG,IAAI,CAAb,EAAgByE,KAAKxE,MAAL,GAAc,CAA9B,EAAiCD,GAAjC,EAAsC;AACrC,QAAIsM,YAAY7H,KAAKzE,IAAIyE,KAAKxE,MAAd,CAAhB;AACA,QAAIsM,SAAS9H,KAAK,CAACzE,IAAI,CAAL,IAAUyE,KAAKxE,MAApB,CAAb;AACA,QAAIuM,UAAU/H,KAAK,CAACzE,IAAI,CAAL,IAAUyE,KAAKxE,MAApB,CAAd;AACA,QAAIwM,0BAA0BpN,MAAMiN,SAAN,CAA1B,EAA4CjN,MAAMmN,OAAN,CAA5C,EAA4DhM,KAA5D,CAAJ,EAAwE;AACvE;AACA;AACD,QAAIiM,0BAA0BpN,MAAMiN,SAAN,CAA1B,EAA4CjN,MAAMmN,OAAN,CAA5C,EAA4DH,QAA5D,CAAJ,EAA2E;AAC1E;AACA;AACD,QAAI,CAACK,qBAAqB;AACzBxK,QAAG,CAAC7C,MAAMiN,SAAN,EAAiBpK,CAAjB,GAAqB7C,MAAMmN,OAAN,EAAetK,CAArC,IAAwC,CADlB;AAEzBC,QAAG,CAAC9C,MAAMiN,SAAN,EAAiBnK,CAAjB,GAAqB9C,MAAMmN,OAAN,EAAerK,CAArC,IAAwC;AAFlB,KAArB,EAGFoJ,KAHE,EAGKlM,KAHL,CAAL,EAGkB;AACjB;AACA;;AAEDmM,cAAUnK,IAAV,CAAe,CAACiL,SAAD,EAAYC,MAAZ,EAAoBC,OAApB,CAAf;AACAH,aAAShL,IAAT,CAAc;AACbZ,YAAO;AACNyB,SAAG7C,MAAMiN,SAAN,EAAiBpK,CADd;AAENC,SAAG9C,MAAMiN,SAAN,EAAiBnK;AAFd,MADM;AAKbzB,UAAK;AACJwB,SAAG7C,MAAMmN,OAAN,EAAetK,CADd;AAEJC,SAAG9C,MAAMmN,OAAN,EAAerK;AAFd;AALQ,KAAd;AAUAsC,SAAKiB,MAAL,CAAY,CAAC1F,IAAI,CAAL,IAAUyE,KAAKxE,MAA3B,EAAkC,CAAlC;AACA;AACDuL,aAAUnK,IAAV,CAAe,CAACoD,KAAK,CAAL,CAAD,EAAUA,KAAK,CAAL,CAAV,EAAmBA,KAAK,CAAL,CAAnB,CAAf;;AAEA,OAAIlB,WAAWnB,SAASyH,cAAT,CAAwB,WAAxB,CAAf;AACA,OAAI/E,iBAAiB,6BAAmBvB,QAAnB,CAArB;AACAuB,kBAAeb,aAAf,CAA6BoI,QAA7B;AACA,UAAOb,SAAP;;AAEA,YAASY,gBAAT,CAA2B3H,IAA3B,EAAiCpF,KAAjC,EAAwC;AACvC,QAAImB,QAAQ,EAAZ;AACA,SAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIuL,MAAM9G,IAAN,CAAWxE,MAAX,GAAoB,CAAxC,EAA2CD,GAA3C,EAAgD;AAC/CQ,WAAMa,IAAN,CAAW;AACVZ,aAAO;AACNyB,UAAG7C,MAAMoF,KAAKzE,CAAL,CAAN,EAAekC,CADZ;AAENC,UAAG9C,MAAMoF,KAAKzE,CAAL,CAAN,EAAemC;AAFZ,OADG;AAKVzB,WAAK;AACJwB,UAAG7C,MAAMoF,KAAKzE,IAAI,CAAT,CAAN,EAAmBkC,CADlB;AAEJC,UAAG9C,MAAMoF,KAAKzE,IAAI,CAAT,CAAN,EAAmBmC;AAFlB;AALK,MAAX;AAUA;;AAED3B,UAAMa,IAAN,CAAW;AACVZ,YAAO;AACLyB,SAAG7C,MAAMoF,KAAK,CAAL,CAAN,EAAevC,CADb;AAELC,SAAG9C,MAAMoF,KAAK,CAAL,CAAN,EAAetC;AAFb,MADG;AAKVzB,UAAK;AACHwB,SAAG7C,MAAMoF,KAAKA,KAAKxE,MAAL,GAAc,CAAnB,CAAN,EAA6BiC,CAD7B;AAEHC,SAAG9C,MAAMoF,KAAKA,KAAKxE,MAAL,GAAc,CAAnB,CAAN,EAA6BkC;AAF7B;AALK,KAAX;AAUA,WAAO3B,KAAP;AACA;;AAED,YAASiM,yBAAT,CAAmCpF,KAAnC,EAA0C3G,GAA1C,EAA+CF,KAA/C,EAAsD;AACrD,SAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIQ,MAAMP,MAA1B,EAAkCD,GAAlC,EAAuC;AACtC,SAAI2M,YAAYtF,KAAZ,EAAmB3G,GAAnB,EAAwBF,MAAMR,CAAN,EAASS,KAAjC,EAAwCD,MAAMR,CAAN,EAASU,GAAjD,CAAJ,EAA2D,OAAO,IAAP;AAC3D;AACD,WAAO,KAAP;AACA;;AAED,YAASiM,WAAT,CAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsC;AACrC,QAAIC,KAAKC,WAAWF,GAAG7K,CAAH,GAAO4K,GAAG5K,CAArB,EAAwB6K,GAAG5K,CAAH,GAAO2K,GAAG3K,CAAlC,EAAqCyK,GAAG1K,CAAH,GAAO4K,GAAG5K,CAA/C,EAAkD0K,GAAGzK,CAAH,GAAO2K,GAAG3K,CAA5D,CAAT;AACA,QAAI+K,KAAKD,WAAWF,GAAG7K,CAAH,GAAO4K,GAAG5K,CAArB,EAAwB6K,GAAG5K,CAAH,GAAO2K,GAAG3K,CAAlC,EAAqC0K,GAAG3K,CAAH,GAAO4K,GAAG5K,CAA/C,EAAkD2K,GAAG1K,CAAH,GAAO2K,GAAG3K,CAA5D,CAAT;AACA,QAAIgL,KAAKF,WAAWJ,GAAG3K,CAAH,GAAO0K,GAAG1K,CAArB,EAAwB2K,GAAG1K,CAAH,GAAOyK,GAAGzK,CAAlC,EAAqC2K,GAAG5K,CAAH,GAAO0K,GAAG1K,CAA/C,EAAkD4K,GAAG3K,CAAH,GAAOyK,GAAGzK,CAA5D,CAAT;AACA,QAAIiL,KAAKH,WAAWJ,GAAG3K,CAAH,GAAO0K,GAAG1K,CAArB,EAAwB2K,GAAG1K,CAAH,GAAOyK,GAAGzK,CAAlC,EAAqC4K,GAAG7K,CAAH,GAAO0K,GAAG1K,CAA/C,EAAkD6K,GAAG5K,CAAH,GAAOyK,GAAGzK,CAA5D,CAAT;AACA,QAAI6K,MAAM,CAAN,IAAWE,MAAM,CAAjB,IAAsBC,MAAM,CAA5B,IAAiCC,MAAM,CAA3C,EAA8C;AAC7C,SAAIC,KAAKpK,KAAK0F,IAAL,CAAU2E,IAAIV,GAAG1K,CAAH,GAAO2K,GAAG3K,CAAd,IAAmBoL,IAAIV,GAAGzK,CAAH,GAAO0K,GAAG1K,CAAd,CAA7B,CAAT;AACA,SAAIoL,KAAKtK,KAAK0F,IAAL,CAAU2E,IAAIR,GAAG5K,CAAH,GAAO6K,GAAG7K,CAAd,IAAmBoL,IAAIR,GAAG3K,CAAH,GAAO4K,GAAG5K,CAAd,CAA7B,CAAT;AACA,YAAOmL,IAAKV,GAAG1K,CAAH,GAAO2K,GAAG3K,CAAX,IAAiB4K,GAAG5K,CAAH,GAAO6K,GAAG7K,CAA3B,CAAJ,IAAqCoL,IAAKV,GAAGzK,CAAH,GAAO0K,GAAG1K,CAAX,IAAiB2K,GAAG3K,CAAH,GAAO4K,GAAG5K,CAA3B,CAAJ,CAArC,IAA2EmL,IAAID,KAAKE,EAAT,CAAlF;AACA;AACD,QAAKP,KAAKE,EAAN,GAAY,CAAZ,IAAkBC,KAAKC,EAAN,GAAY,CAAjC,EAAqC;AACpC,YAAO,IAAP;AACA;AACD,WAAO,KAAP;;AAEA,aAASH,UAAT,CAAqBO,EAArB,EAAyBC,EAAzB,EAA6BC,EAA7B,EAAiCC,EAAjC,EAAqC;AACpC,YAAOH,KAAKG,EAAL,GAAUD,KAAKD,EAAtB;AACA;;AAED,aAASH,GAAT,CAAcpL,CAAd,EAAiB;AAChB,YAAOA,IAAEA,CAAT;AACA;AACD;;AAED,YAASwK,oBAAT,CAA+BkB,KAA/B,EAAsCrC,KAAtC,EAA6ClM,KAA7C,EAAoD;AACnD;AACA,QAAI6C,IAAI0L,MAAM1L,CAAd;AAAA,QAAiBC,IAAIyL,MAAMzL,CAA3B;AACA,QAAI0L,SAAS,KAAb;;AAEA,SAAK,IAAI7N,IAAI,CAAR,EAAWkH,IAAIqE,MAAM9G,IAAN,CAAWxE,MAAX,GAAoB,CAAxC,EAA2CD,IAAIuL,MAAM9G,IAAN,CAAWxE,MAA1D,EAAkEiH,IAAIlH,GAAtE,EAA2E;AAC1E,SAAI8N,KAAKzO,MAAMkM,MAAM9G,IAAN,CAAWzE,CAAX,CAAN,EAAqBkC,CAA9B;AAAA,SAAiC6L,KAAK1O,MAAMkM,MAAM9G,IAAN,CAAWzE,CAAX,CAAN,EAAqBmC,CAA3D;AACA,SAAI6L,KAAK3O,MAAMkM,MAAM9G,IAAN,CAAWyC,CAAX,CAAN,EAAqBhF,CAA9B;AAAA,SAAiC+L,KAAK5O,MAAMkM,MAAM9G,IAAN,CAAWyC,CAAX,CAAN,EAAqB/E,CAA3D;;AAEA,SAAI+L,YAAcH,KAAK5L,CAAN,IAAa8L,KAAK9L,CAAnB,IACXD,IAAI,CAAC8L,KAAKF,EAAN,KAAa3L,IAAI4L,EAAjB,KAAwBE,KAAKF,EAA7B,IAAmCD,EAD5C;AAEA,SAAII,SAAJ,EAAe;AACdL,eAAS,CAACA,MAAV;AACA;AACD;;AAED,WAAOA,MAAP;AACA;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAED,WAASnC,qBAAT,CAA+BvG,KAA/B,EAAsCqG,SAAtC,EAAiD/G,IAAjD,EAAuDpF,KAAvD,EAA8D;AAC7D,OAAI8O,gBAAgB,EAApB;AACA,OAAIC,oBAAoB5C,UAAUQ,GAAV,CAAc;AAAA,WAAiB;AACtDqC,gBAAW,KAD2C;AAEtDC,eAAUC;AAF4C,KAAjB;AAAA,IAAd,CAAxB;AAIA;AACA,QAAK,IAAIvO,IAAI,CAAb,EAAgBA,IAAIoO,kBAAkBnO,MAAtC,EAA8CD,GAA9C,EAAmD;AAClD,QAAIwO,iBAAiBrJ,MAAM,CAAN,CAAjB,EAA2BiJ,kBAAkBpO,CAAlB,EAAqBsO,QAAhD,CAAJ,EAA+D;AAC9DH,mBAAc9M,IAAd,CAAmB;AAClBsD,YAAM,EADY;AAElB2J,gBAAUF,kBAAkBpO,CAAlB,EAAqBsO;AAFb,MAAnB;AAIAF,uBAAkBpO,CAAlB,EAAqBqO,SAArB,GAAiC,IAAjC;AACA;AACD;AACD;;AAEA;AACA,QAAK,IAAIrO,IAAI,CAAb,EAAgBA,IAAImO,cAAclO,MAAlC,EAA0CD,GAA1C,EAA+C;AAC9C,QAAIwO,iBAAiBrJ,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAjB,EAA0CkO,cAAcnO,CAAd,EAAiBsO,QAA3D,CAAJ,EAA0E;AACzE;AACA,YAAOG,sBAAsBN,cAAcnO,CAAd,EAAiBsO,QAAvC,EAAiDnJ,MAAM,CAAN,CAAjD,EAA2DA,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAA3D,EAAoFwE,IAApF,EAA0FpF,KAA1F,CAAP;AACA;AACD;;AAED,OAAIqP,aAAa,KAAjB;AACA,OAAIC,UAAU,EAAd;AACA,UAAO,CAACD,UAAR,EAAoB;AACnB,QAAIE,mBAAmB,EAAvB;AACA,SAAK,IAAI5O,IAAI,CAAb,EAAgBA,IAAImO,cAAclO,MAAlC,EAA0CD,GAA1C,EAA+C;AAC9C,UAAK,IAAIkH,IAAI,CAAb,EAAgBA,IAAIkH,kBAAkBnO,MAAtC,EAA8CiH,GAA9C,EAAmD;AAClD,UAAIkH,kBAAkBlH,CAAlB,EAAqBmH,SAAzB,EAAoC;;AAEpC,UAAIQ,cAAcC,mCAAmCX,cAAcnO,CAAd,EAAiBsO,QAApD,EAA8DF,kBAAkBlH,CAAlB,EAAqBoH,QAAnF,CAAlB;AACA,UAAIO,gBAAgBrP,SAApB,EAA+B;AAC9B,WAAIkH,UAAUyH,cAAcnO,CAAd,EAAiB2E,IAAjB,CAAsB2B,KAAtB,EAAd;AACAI,eAAQrF,IAAR,CAAawN,WAAb;AACAD,wBAAiBvN,IAAjB,CAAsB;AACrBsD,cAAM+B,OADe;AAErB4H,kBAAUF,kBAAkBlH,CAAlB,EAAqBoH;AAFV,QAAtB;AAIAF,yBAAkBlH,CAAlB,EAAqBmH,SAArB,GAAiC,IAAjC;AACA;AACD;AACD;AACDF,oBAAgBS,gBAAhB;;AAEA,SAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIZ,cAAclO,MAAlC,EAA0C8O,GAA1C,EAA+C;AAC9C,SAAIP,iBAAiBrJ,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAjB,EAA0CkO,cAAcY,CAAd,EAAiBT,QAA3D,CAAJ,EAA0E;AACzEI,mBAAa,IAAb;AACAC,gBAAUR,cAAcY,CAAd,EAAiBpK,IAA3B;AACA;AACD;AACD;;AAED,OAAIA,OAAOqK,qBAAqBL,OAArB,EAA8BtP,KAA9B,EAAqC8F,KAArC,CAAX;;AAEA,UAAOR,IAAP;;AAEA,YAAS6J,gBAAT,CAA0BnO,IAA1B,EAAgCiO,QAAhC,EAA0C;AACzC,SAAK,IAAIpH,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC3B,SAAIoH,SAASpH,CAAT,MAAgB7G,IAApB,EAA0B;AACzB,aAAO,IAAP;AACA;AACD;AACD,WAAO,KAAP;AACA;;AAED,YAASoO,qBAAT,CAA+BH,QAA/B,EAAyC7F,KAAzC,EAAgDC,KAAhD,EAAuDjE,IAAvD,EAA6DpF,KAA7D,EAAoE;AACnE,QAAI,CAAC4P,aAAaxG,KAAb,EAAoBC,KAApB,EAA2BjE,IAA3B,CAAL,EAAuC;AACtC,SAAIE,OAAO,EAAX;AACAA,UAAKtD,IAAL,CAAU6N,YAAYzG,KAAZ,EAAmBpJ,KAAnB,CAAV;AACAsF,UAAKtD,IAAL,CAAU6N,YAAYxG,KAAZ,EAAmBrJ,KAAnB,CAAV;AACA,YAAOsF,IAAP;AACA;;AAED,QAAIiI,KAAK;AACR1K,QAAG7C,MAAMiP,SAAS,CAAT,CAAN,EAAmBpM,CADd;AAERC,QAAG9C,MAAMiP,SAAS,CAAT,CAAN,EAAmBnM;AAFd,KAAT;AAIA,QAAI0K,KAAK;AACR3K,QAAG7C,MAAMiP,SAAS,CAAT,CAAN,EAAmBpM,CADd;AAERC,QAAG9C,MAAMiP,SAAS,CAAT,CAAN,EAAmBnM;AAFd,KAAT;AAIA,QAAI2K,KAAK;AACR5K,QAAG7C,MAAMiP,SAAS,CAAT,CAAN,EAAmBpM,CADd;AAERC,QAAG9C,MAAMiP,SAAS,CAAT,CAAN,EAAmBnM;AAFd,KAAT;;AAKA,QAAID,IAAI,CAAC0K,GAAG1K,CAAH,GAAO2K,GAAG3K,CAAV,GAAc4K,GAAG5K,CAAlB,IAAqB,CAA7B;AACA,QAAIC,IAAI,CAACyK,GAAGzK,CAAH,GAAO0K,GAAG1K,CAAV,GAAc2K,GAAG3K,CAAlB,IAAqB,CAA7B;;AAEA,QAAIwC,OAAO,EAAX;AACAA,SAAKtD,IAAL,CAAU6N,YAAYzG,KAAZ,EAAmBpJ,KAAnB,CAAV;AACAsF,SAAKtD,IAAL,CAAU;AACT4G,WAAM,aAAa8C,iBADV;AAET7I,QAAGA,CAFM;AAGTC,QAAGA,CAHM;AAIT1C,WAAM;AAJG,KAAV;AAMAkF,SAAKtD,IAAL,CAAU6N,YAAYxG,KAAZ,EAAmBrJ,KAAnB,CAAV;AACA0L;;AAEA,aAASmE,WAAT,CAAqB3P,QAArB,EAA+BF,KAA/B,EAAsC;AACrC,YAAO;AACN4I,YAAM1I,QADA;AAEN2C,SAAG7C,MAAME,QAAN,EAAgB2C,CAFb;AAGNC,SAAG9C,MAAME,QAAN,EAAgB4C,CAHb;AAIN1C,YAAMJ,MAAME,QAAN,EAAgBE;AAJhB,MAAP;AAMA;AAED;;AAED,YAASwP,YAAT,CAAsBxG,KAAtB,EAA6BC,KAA7B,EAAoCjE,IAApC,EAA0C;AACzC,SAAK,IAAIzE,IAAI,CAAb,EAAgBA,IAAIyE,KAAKxE,MAAzB,EAAiCD,GAAjC,EAAsC;AACrC,SAAIyE,KAAKzE,CAAL,MAAYyI,KAAhB,EAAuB;AACtB,UAAIlB,OAAOvH,IAAI,CAAf;AAAA,UAAkBmP,OAAOnP,IAAI,CAA7B;AACA,UAAImP,SAAS1K,KAAKxE,MAAlB,EAA0B;AACzBkP,cAAO,CAAP;AACA;AACD,UAAI5H,SAAS,CAAC,CAAd,EAAiB;AAChBA,cAAO9C,KAAKxE,MAAL,GAAc,CAArB;AACA;AACD,UAAIwE,KAAK0K,IAAL,MAAezG,KAAnB,EAA0B;AACzB,cAAO,IAAP;AACA;AACD,UAAIjE,KAAK8C,IAAL,MAAemB,KAAnB,EAA0B;AACzB,cAAO,IAAP;AACA;AACD;AACD;AACD,WAAO,KAAP;AACA;;AAED,YAASoG,kCAAT,CAA6CM,SAA7C,EAAwDC,SAAxD,EAAmE;AAClE,SAAK,IAAIrP,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC3B,SAAIwO,iBAAiBY,UAAUpP,CAAV,CAAjB,EAA+BqP,SAA/B,KAA6Cb,iBAAiBY,UAAUpP,IAAI,CAAd,CAAjB,EAAmCqP,SAAnC,CAAjD,EAAgG;AAC/F,aAAO,CAACD,UAAUpP,CAAV,CAAD,EAAeoP,UAAUpP,IAAI,CAAd,CAAf,CAAP;AACA;AACD;;AAED,QAAIwO,iBAAiBY,UAAU,CAAV,CAAjB,EAA+BC,SAA/B,KAA6Cb,iBAAiBY,UAAUA,UAAUnP,MAAV,GAAmB,CAA7B,CAAjB,EAAkDoP,SAAlD,CAAjD,EAA+G;AAC9G,YAAO,CAACD,UAAU,CAAV,CAAD,EAAeA,UAAUA,UAAUnP,MAAV,GAAmB,CAA7B,CAAf,CAAP;AACA;;AAED,WAAOT,SAAP;AACA;;AAED,YAASwP,oBAAT,CAA8BL,OAA9B,EAAuCtP,KAAvC,EAA8C8F,KAA9C,EAAqD;AACpD;AACA,QAAIR,OAAO,EAAX;;AAEAA,SAAKtD,IAAL,CAAU6N,YAAY/J,MAAM,CAAN,CAAZ,EAAsB9F,KAAtB,CAAV;;AAEA,SAAK,IAAIW,IAAI,CAAb,EAAgBA,IAAI2O,QAAQ1O,MAA5B,EAAoCD,GAApC,EAAyC;AACxC,SAAIsP,cAAcC,uBAAuBZ,QAAQ3O,CAAR,CAAvB,EAAmCX,KAAnC,CAAlB;AACAsF,UAAKtD,IAAL,CAAU;AACT4G,YAAM,aAAa8C,iBADV;AAET7I,SAAGoN,YAAYpN,CAFN;AAGTC,SAAGmN,YAAYnN,CAHN;AAIT1C,YAAM;AAJG,MAAV;AAMAsL;AACA;AACDpG,SAAKtD,IAAL,CAAU6N,YAAY/J,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAZ,EAAqCZ,KAArC,CAAV;;AAEA,WAAOsF,IAAP;;AAEA,aAAS4K,sBAAT,CAAgCzI,OAAhC,EAAyCzH,KAAzC,EAAgD;AAC/C,SAAIoJ,QAAQ;AACXvG,SAAG7C,MAAMyH,QAAQ,CAAR,CAAN,EAAkB5E,CADV;AAEXC,SAAG9C,MAAMyH,QAAQ,CAAR,CAAN,EAAkB3E;AAFV,MAAZ;AAIA,SAAIuG,QAAQ;AACXxG,SAAG7C,MAAMyH,QAAQ,CAAR,CAAN,EAAkB5E,CADV;AAEXC,SAAG9C,MAAMyH,QAAQ,CAAR,CAAN,EAAkB3E;AAFV,MAAZ;;AAKA,YAAO;AACND,SAAG,CAACuG,MAAMvG,CAAN,GAAUwG,MAAMxG,CAAjB,IAAoB,CADjB;AAENC,SAAG,CAACsG,MAAMtG,CAAN,GAAUuG,MAAMvG,CAAjB,IAAoB;AAFjB,MAAP;AAIA;;AAED,aAAS+M,WAAT,CAAqB3P,QAArB,EAA+BF,KAA/B,EAAsC;AACrC,YAAO;AACN4I,YAAM1I,QADA;AAEN2C,SAAG7C,MAAME,QAAN,EAAgB2C,CAFb;AAGNC,SAAG9C,MAAME,QAAN,EAAgB4C,CAHb;AAIN1C,YAAMJ,MAAME,QAAN,EAAgBE;AAJhB,MAAP;AAMA;AACD;AACD;;AAED,WAASkM,cAAT,CAAwBhH,IAAxB,EAA8BQ,KAA9B,EAAqC;AACpC,OAAIA,MAAMlF,MAAN,KAAiB,CAArB,EAAwB;AACvB,WAAO0E,IAAP;AACA;;AAED,OAAIA,KAAK1E,MAAL,IAAekF,MAAMlF,MAAzB,EAAiC;AAChC,WAAOuP,mBAAmB7K,IAAnB,EAAyBQ,KAAzB,CAAP;AACA;;AAED,UAAOsK,mBAAmB9K,IAAnB,EAAyBQ,KAAzB,CAAP;;AAEA,YAASqK,kBAAT,CAA4B7K,IAA5B,EAAkCQ,KAAlC,EAAyC;AACxC,QAAIuK,iBAAiB,KAArB;AACA,WAAO,CAACA,cAAR,EAAwB;AACvB,UAAK,IAAI1P,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAL,GAAc,CAAlC,EAAqCD,IAAIA,IAAI,CAA7C,EAAgD;AAC/C,UAAI2E,KAAK1E,MAAL,IAAekF,MAAMlF,MAAzB,EAAiC;AAChCyP,wBAAiB,IAAjB;AACA;AACA;AACD,UAAInD,SAASoD,UAAUhL,KAAK3E,CAAL,CAAV,EAAmB2E,KAAK3E,IAAI,CAAT,CAAnB,CAAb;AACA2E,WAAKe,MAAL,CAAY1F,IAAI,CAAhB,EAAmB,CAAnB,EAAsBuM,MAAtB;AACA;AACD;;AAED,SAAK,IAAIvM,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAL,GAAc,CAAlC,EAAqCD,GAArC,EAA0C;AACzC2E,UAAK3E,CAAL,EAAQiI,IAAR,GAAe9C,MAAMnF,CAAN,CAAf;AACA2E,UAAK3E,CAAL,EAAQP,IAAR,GAAe,QAAf;AACA;;AAED,WAAOkF,IAAP;;AAEA,aAASgL,SAAT,CAAmBC,MAAnB,EAA2BC,MAA3B,EAAmC;AAClC,YAAO;AACN3N,SAAG,CAAC0N,OAAO1N,CAAP,GAAW2N,OAAO3N,CAAnB,IAAwB,CADrB;AAENC,SAAG,CAACyN,OAAOzN,CAAP,GAAW0N,OAAO1N,CAAnB,IAAwB;AAFrB,MAAP;AAKA;AACD;;AAED,YAASsN,kBAAT,CAA4B9K,IAA5B,EAAkCQ,KAAlC,EAAyC;AACxC,QAAI2K,OAAO7M,KAAKoF,KAAL,CAAW,CAAC1D,KAAK1E,MAAL,GAAc,CAAf,KAAqBkF,MAAMlF,MAAN,GAAe,CAAf,GAAmB,CAAxC,CAAX,CAAX;AACA,SAAK,IAAID,IAAI8P,IAAR,EAAc5I,IAAI,CAAvB,EAA0BA,IAAI/B,MAAMlF,MAAN,GAAe,CAA7C,EAAgDD,IAAIA,IAAI8P,IAAR,EAAc5I,GAA9D,EAAmE;AAClEvC,UAAK3E,CAAL,EAAQiI,IAAR,GAAe9C,MAAM+B,CAAN,CAAf;AACAvC,UAAK3E,CAAL,EAAQP,IAAR,GAAe,QAAf;AACA;AACD,WAAOkF,IAAP;AACA;AACD;;AAED,WAASiH,cAAT,CAAwBjH,IAAxB,EAA8BtF,KAA9B,EAAqCmB,KAArC,EAA4C;AAC3C,QAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAzB,EAAiCD,GAAjC,EAAsC;AACrCX,UAAMsF,KAAK3E,CAAL,EAAQiI,IAAd,IAAsB;AACrBxI,WAAMkF,KAAK3E,CAAL,EAAQP,IADO;AAErByC,QAAGyC,KAAK3E,CAAL,EAAQkC,CAFU;AAGrBC,QAAGwC,KAAK3E,CAAL,EAAQmC;AAHU,KAAtB;AAKA;;AAED,QAAK,IAAInC,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAL,GAAc,CAAlC,EAAqCD,GAArC,EAA0C;AACzCQ,UAAMa,IAAN,CAAW;AACVZ,YAAOkE,KAAK3E,CAAL,EAAQiI,IADL;AAEVvH,UAAKiE,KAAK3E,IAAI,CAAT,EAAYiI;AAFP,KAAX;AAIA;AAED;;AAED,WAAS6D,iBAAT,CAA2BrH,IAA3B,EAAiCE,IAAjC,EAAuCtF,KAAvC,EAA8C;AAC7C,OAAI0Q,WAAW;AACdnD,QAAI,EAAC1K,GAAG7C,MAAMoF,KAAK,CAAL,CAAN,EAAevC,CAAnB,EAAsBC,GAAG9C,MAAMoF,KAAK,CAAL,CAAN,EAAetC,CAAxC,EADU;AAEd0K,QAAI,EAAC3K,GAAG7C,MAAM,YAAN,EAAoB6C,CAAxB,EAA2BC,GAAG9C,MAAM,YAAN,EAAoB8C,CAAlD;AAFU,IAAf;;AAKA,QAAK,IAAInC,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAL,GAAc,CAAlC,EAAqCD,GAArC,EAA0C;AACzC,QAAI4M,KAAK,EAAC1K,GAAGyC,KAAK3E,CAAL,EAAQkC,CAAZ,EAAeC,GAAGwC,KAAK3E,CAAL,EAAQmC,CAA1B,EAAT;AACA,QAAI0K,KAAK,EAAC3K,GAAGyC,KAAK3E,IAAI,CAAT,EAAYkC,CAAhB,EAAmBC,GAAGwC,KAAK3E,IAAI,CAAT,EAAYmC,CAAlC,EAAT;;AAEA,QAAI6N,qBAAqBD,SAASnD,EAA9B,EAAkCmD,SAASlD,EAA3C,EAA+CD,EAA/C,EAAmDC,EAAnD,CAAJ,EAA4D;AAC3D,YAAO;AACNoD,oBAAc,IADR;AAENC,oBAAcC,iBAAiBxL,IAAjB;AAFR,MAAP;AAIA;AACD;;AAED,UAAO;AACNsL,kBAAc,KADR;AAENC,kBAAc1Q;AAFR,IAAP;;AAKA,YAASwQ,oBAAT,CAA+BpD,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+C;AAC9C,QAAIC,KAAKC,WAAWF,GAAG7K,CAAH,GAAO4K,GAAG5K,CAArB,EAAwB6K,GAAG5K,CAAH,GAAO2K,GAAG3K,CAAlC,EAAqCyK,GAAG1K,CAAH,GAAO4K,GAAG5K,CAA/C,EAAkD0K,GAAGzK,CAAH,GAAO2K,GAAG3K,CAA5D,CAAT;AACA,QAAI+K,KAAKD,WAAWF,GAAG7K,CAAH,GAAO4K,GAAG5K,CAArB,EAAwB6K,GAAG5K,CAAH,GAAO2K,GAAG3K,CAAlC,EAAqC0K,GAAG3K,CAAH,GAAO4K,GAAG5K,CAA/C,EAAkD2K,GAAG1K,CAAH,GAAO2K,GAAG3K,CAA5D,CAAT;AACA,QAAIgL,KAAKF,WAAWJ,GAAG3K,CAAH,GAAO0K,GAAG1K,CAArB,EAAwB2K,GAAG1K,CAAH,GAAOyK,GAAGzK,CAAlC,EAAqC2K,GAAG5K,CAAH,GAAO0K,GAAG1K,CAA/C,EAAkD4K,GAAG3K,CAAH,GAAOyK,GAAGzK,CAA5D,CAAT;AACA,QAAIiL,KAAKH,WAAWJ,GAAG3K,CAAH,GAAO0K,GAAG1K,CAArB,EAAwB2K,GAAG1K,CAAH,GAAOyK,GAAGzK,CAAlC,EAAqC4K,GAAG7K,CAAH,GAAO0K,GAAG1K,CAA/C,EAAkD6K,GAAG5K,CAAH,GAAOyK,GAAGzK,CAA5D,CAAT;AACA,QAAI6K,MAAM,CAAN,IAAWE,MAAM,CAAjB,IAAsBC,MAAM,CAA5B,IAAiCC,MAAM,CAA3C,EAA8C;AAC7C,SAAIC,KAAKpK,KAAK0F,IAAL,CAAU2E,IAAIV,GAAG1K,CAAH,GAAO2K,GAAG3K,CAAd,IAAmBoL,IAAIV,GAAGzK,CAAH,GAAO0K,GAAG1K,CAAd,CAA7B,CAAT;AACA,SAAIoL,KAAKtK,KAAK0F,IAAL,CAAU2E,IAAIR,GAAG5K,CAAH,GAAO6K,GAAG7K,CAAd,IAAmBoL,IAAIR,GAAG3K,CAAH,GAAO4K,GAAG5K,CAAd,CAA7B,CAAT;AACA,YAAOmL,IAAKV,GAAG1K,CAAH,GAAO2K,GAAG3K,CAAX,IAAiB4K,GAAG5K,CAAH,GAAO6K,GAAG7K,CAA3B,CAAJ,IAAqCoL,IAAKV,GAAGzK,CAAH,GAAO0K,GAAG1K,CAAX,IAAiB2K,GAAG3K,CAAH,GAAO4K,GAAG5K,CAA3B,CAAJ,CAArC,IAA2EmL,IAAID,KAAKE,EAAT,CAAlF;AACA;AACD,QAAKP,KAAKE,EAAN,IAAa,CAAb,IAAmBC,KAAKC,EAAN,IAAa,CAAnC,EAAuC;AACtC,YAAO,IAAP;AACA;AACD,WAAO,KAAP;;AAEA,aAASH,UAAT,CAAqBO,EAArB,EAAyBC,EAAzB,EAA6BC,EAA7B,EAAiCC,EAAjC,EAAqC;AACpC,YAAOH,KAAKG,EAAL,GAAUD,KAAKD,EAAtB;AACA;;AAED,aAASH,GAAT,CAAcpL,CAAd,EAAiB;AAChB,YAAOA,IAAEA,CAAT;AACA;AACD;;AAED,YAASiO,gBAAT,CAA0BxL,IAA1B,EAAgC;AAC/B,QAAIuL,eAAevL,KAAK,CAAL,CAAnB;AACA,SAAK,IAAI3E,IAAI,CAAb,EAAgBA,IAAI2E,KAAK1E,MAAL,GAAc,CAAlC,EAAqCD,GAArC,EAA0C;AACzC,SAAI2E,KAAK3E,CAAL,EAAQkC,CAAR,GAAYgO,aAAahO,CAA7B,EAAgC;AAC/BgO,qBAAevL,KAAK3E,CAAL,CAAf;AACA;AACD;AACD,WAAOkQ,aAAajI,IAApB;AACA;AACD;AACD,EAjfD;AAkfA;;kBAEc+C,W;;;;;;;;;;;;ACrlBf;AACA,IAAIoF,WAAW,CAAf;AACA,SAASC,KAAT,CAAgB5L,IAAhB,EAAsBuB,OAAtB,EAA+BmG,EAA/B,EAAmC;AAClC,MAAK1H,IAAL,GAAYA,IAAZ;AACA,MAAKuB,OAAL,GAAeA,OAAf;AACA,MAAKmG,EAAL,GAAUiE,QAAV;AACAA;;AAEA;AACA,MAAKnK,QAAL,GAAgB,UAAUd,KAAV,EAAiB0G,aAAjB,EAAgC;AAC/C,MAAI,CAAC,KAAK7F,OAAN,IAAiB,CAAC6F,cAAcoE,YAApC,EAAkD;AACjD,UAAO,KAAKK,cAAL,CAAoBnL,KAApB,CAAP;AACA;AACD,SAAO,KAAKoL,mBAAL,CAAyBpL,KAAzB,EAAgC0G,cAAcqE,YAA9C,CAAP;AACA,EALD;;AAOA,MAAKI,cAAL,GAAsB,UAAUnL,KAAV,EAAiB;AACtC,MAAIqL,QAAQ,EAAZ;AACA,MAAIC,QAAQ,EAAZ;;AAEA,MAAIzQ,CAAJ;AACA,OAAKA,IAAI,CAAT,EAAYA,IAAI,KAAKyE,IAAL,CAAUxE,MAA1B,EAAkCD,GAAlC,EAAuC;AACtCwQ,SAAMnP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA,OAAI,KAAKyE,IAAL,CAAUzE,CAAV,MAAiBmF,MAAM,CAAN,CAAjB,IAA6B,KAAKV,IAAL,CAAUzE,CAAV,MAAiBmF,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAlD,EAA2E;AAC1EwQ,UAAMpP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACAA;AACA;AACA;AACD;;AAED,OAAKA,CAAL,EAAQA,IAAI,KAAKyE,IAAL,CAAUxE,MAAtB,EAA8BD,GAA9B,EAAmC;AAClCyQ,SAAMpP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA,OAAI,KAAKyE,IAAL,CAAUzE,CAAV,MAAiBmF,MAAM,CAAN,CAAjB,IAA6B,KAAKV,IAAL,CAAUzE,CAAV,MAAiBmF,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAlD,EAA2E;AAC1E;AACA;AACD;;AAED,OAAK,IAAIiH,IAAI,CAAb,EAAgBA,IAAI/B,MAAMlF,MAAN,GAAe,CAAnC,EAAsCiH,GAAtC,EAA2C;AAC1CsJ,SAAMnP,IAAN,CAAW8D,MAAM+B,CAAN,CAAX;AACA;;AAED,OAAK,IAAIA,IAAI/B,MAAMlF,MAAN,GAAe,CAA5B,EAA+BiH,IAAI,CAAnC,EAAsCA,GAAtC,EAA2C;AAC1CuJ,SAAMpP,IAAN,CAAW8D,MAAM+B,CAAN,CAAX;AACA;;AAEDsJ,QAAMnP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACAA;;AAEA,OAAKA,CAAL,EAAQA,IAAI,KAAKyE,IAAL,CAAUxE,MAAtB,EAA8BD,GAA9B,EAAmC;AAClCwQ,SAAMnP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA;;AAED,SAAO,CAAC,IAAIqQ,KAAJ,CAAUG,KAAV,EAAiBE,aAAaF,KAAb,CAAjB,CAAD,EAAwC,IAAIH,KAAJ,CAAUI,KAAV,EAAiBC,aAAaD,KAAb,CAAjB,CAAxC,CAAP;AACA,EArCD;;AAuCA,MAAKF,mBAAL,GAA2B,UAAUpL,KAAV,EAAiB+K,YAAjB,EAA+B;AACzD,MAAIM,QAAQ,EAAZ;AACA,MAAIC,QAAQ,EAAZ;;AAEA,MAAIzQ,CAAJ;AACA,OAAKA,IAAI,CAAT,EAAYA,IAAI,KAAKyE,IAAL,CAAUxE,MAA1B,EAAkCD,GAAlC,EAAuC;AACtCwQ,SAAMnP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA,OAAI,KAAKyE,IAAL,CAAUzE,CAAV,MAAiBmF,MAAM,CAAN,CAAjB,IAA6B,KAAKV,IAAL,CAAUzE,CAAV,MAAiBmF,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAlD,EAA2E;AAC1E;AACA;AACD;AACD,OAAK,IAAIiH,IAAI,CAAb,EAAgBA,IAAI/B,MAAMlF,MAAN,GAAe,CAAnC,EAAsCiH,GAAtC,EAA2C;AAC1CuJ,SAAME,OAAN,CAAcxL,MAAM+B,CAAN,CAAd;AACA,OAAI/B,MAAM+B,CAAN,MAAagJ,YAAjB,EACC;AACD;;AAEDO,QAAMpP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACAA;;AAEA,OAAK,IAAIkH,IAAI,CAAb,EAAgBA,IAAI/B,MAAMlF,MAAN,GAAe,CAAnC,EAAsCiH,GAAtC,EAA2C;AAC1CsJ,SAAMnP,IAAN,CAAW8D,MAAM+B,CAAN,CAAX;AACA;;AAED,OAAKlH,CAAL,EAAQA,IAAI,KAAKyE,IAAL,CAAUxE,MAAtB,EAA8BD,GAA9B,EAAmC;AAClCyQ,SAAMpP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA,OAAI,KAAKyE,IAAL,CAAUzE,CAAV,MAAiBmF,MAAM,CAAN,CAAjB,IAA6B,KAAKV,IAAL,CAAUzE,CAAV,MAAiBmF,MAAMA,MAAMlF,MAAN,GAAe,CAArB,CAAlD,EAA2E;AAC1EuQ,UAAMnP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACAA;AACA;AACA;AACD;;AAED,OAAK,IAAIkH,IAAI/B,MAAMlF,MAAN,GAAe,CAA5B,EAA+BiH,IAAI,CAAnC,EAAsCA,GAAtC,EAA2C;AAC1CuJ,SAAMpP,IAAN,CAAW8D,MAAM+B,CAAN,CAAX;AACA,OAAI/B,MAAM+B,CAAN,MAAagJ,YAAjB,EAA+B;AAC9B;AACA;AACD;;AAED,OAAKlQ,CAAL,EAAQA,IAAI,KAAKyE,IAAL,CAAUxE,MAAtB,EAA8BD,GAA9B,EAAmC;AAClC,OAAI,KAAKyE,IAAL,CAAUzE,CAAV,MAAiB,KAAKyE,IAAL,CAAU,CAAV,CAArB,EAAmC;AAClCzE;AACA;AACA;AACDwQ,SAAMnP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA;;AAED,OAAKA,CAAL,EAAQA,IAAI,KAAKyE,IAAL,CAAUxE,MAAtB,EAA8BD,GAA9B,EAAmC;AAClCyQ,SAAMpP,IAAN,CAAW,KAAKoD,IAAL,CAAUzE,CAAV,CAAX;AACA;;AAED,SAAO,CAAC,IAAIqQ,KAAJ,CAAUG,KAAV,EAAiBE,aAAaF,KAAb,CAAjB,CAAD,EAAwC,IAAIH,KAAJ,CAAUI,KAAV,EAAiBC,aAAaD,KAAb,CAAjB,CAAxC,CAAP;AACA,EArDD;;AAuDA,UAASC,YAAT,CAAsBjM,IAAtB,EAA4B;AAC3B,OAAK,IAAIzE,IAAI,CAAb,EAAgBA,IAAIyE,KAAKxE,MAAzB,EAAiCD,GAAjC,EAAsC;AACrC,OAAIyE,KAAKzE,CAAL,MAAY,UAAhB,EAA4B,OAAO,IAAP;AAC5B;AACD,SAAO,KAAP;AACA;AACD;;kBAEcqQ,K;;;;;;;ACtHf;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,aAAa,IAAI,aAAa;AACtD,mBAAmB,mBAAmB;AACtC,yBAAyB,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa;AACtH;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,UAAU;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,E;;;;;;AC1FA;AACA;AACA;AACA;AACA;;AAEA,cAAc;;AAEd;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,wCAAwC,SAAS;AACjD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,2BAA2B,UAAU;AACrC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,wDAAmE,iBAAiB,EAAE;AAAA;AACtF;AACA;AACA;;AAEA,CAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e60d27cd3b77c390b467","function AdjacencyList() {\r\n\tthis.nodes = {};\r\n\t\r\n\tthis.addNode = function (nodeName) {\r\n\t\tif(this.nodes[nodeName]==undefined)\r\n\t\t\t\tthis.nodes[nodeName] = {\r\n\t\t\t\t\ttype: \"normal\",\r\n\t\t\t\t\tneighbors: {}\r\n\t\t\t\t\t};\r\n\t}\r\n\t\r\n\tthis.addEdge = function (node1Name, node2Name) {\r\n\t\tthis.nodes[node1Name].neighbors[node2Name] = true;\r\n\t\tthis.nodes[node2Name].neighbors[node1Name] = true;\r\n\t}\r\n\t\r\n\tthis.initializeFromText = function (nodesText) {\r\n\t\tthis.nodes = {};\r\n\t\tfor(var i = 0; i < nodesText.length; i++) {\r\n\t\t\tif (nodesText[i]!==\"\") {\r\n\t\t\t\tvar currNode = nodesText[i].split(\"->\");\r\n\t\t\t\tthis.addNode(currNode[0]);\r\n\t\t\t\t\r\n\t\t\t\tif(currNode[1])\t{\r\n\t\t\t\t\tthis.addNode(currNode[1]);\r\n\t\t\t\t\tthis.addEdge(currNode[0], currNode[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.removeNode = function (nodeName) {\r\n\t\tdelete this.nodes[nodeName];\r\n\t\tfor (var node in this.nodes) {\r\n\t\t\tdelete this.nodes[node].neighbors[nodeName];\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.removeEdge = function (node1Name, node2Name) {\r\n\t\tdelete this.nodes[node1Name].neighbors[node2Name];\r\n\t\tdelete this.nodes[node2Name].neighbors[node1Name];\r\n\t}\r\n\t\r\n\tthis.removeEdges = function (edges) {\r\n\t\tfor (var i = 0; i < edges.length; i++) {\r\n\t\t\tthis.removeEdge(edges[i].begin, edges[i].end);\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.removeEdgesWithRemovingAloneNodes = function (edges) {\r\n\t\tthis.removeEdges(edges);\r\n\t\tfor (var node in this.nodes) {\r\n\t\t\tif (Object.keys(this.nodes[node].neighbors).length === 0) {\r\n\t\t\t\tthis.removeNode(node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.getConnectedComponents = function () {\r\n\t\tvar components = [];\r\n\t\tvar checkedNodes = [];\r\n\t\t\r\n\t\tfor (var key in this.nodes) {\r\n\t\t\tif(checkedNodes[key]) continue;\r\n\t\t\t\r\n\t\t\tcheckedNodes[key] = true;\r\n\t\t\t\r\n\t\t\tvar component = new AdjacencyList();\r\n\t\t\t\r\n\t\t\tcomponent.addNode(key);\r\n\t\t\taddNeighbors.call(this, key, component, checkedNodes);\r\n\t\t\tcomponents.push(component);\r\n\t\t}\r\n\t\t\r\n\t\tfunction addNeighbors(nodeName, component, checkedNodes) {\r\n\t\t\tfor (var key in this.nodes[nodeName].neighbors) {\r\n\t\t\t\tcomponent.addNode(key);\r\n\t\t\t\tcomponent.addEdge(nodeName, key);\r\n\t\t\t\t\r\n\t\t\t\tif (!checkedNodes[key]) {\r\n\t\t\t\t\tcheckedNodes[key] = true;\r\n\t\t\t\t\taddNeighbors.call(this, key, component, checkedNodes);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn components;\r\n\t}\r\n\t\r\n\tthis.print = function (textGroup) {\r\n\t\twhile (textGroup.lastChild) {\r\n\t\t\ttextGroup.removeChild(textGroup.lastChild);\r\n\t\t}\r\n\r\n\t\tvar count = 0;\r\n\t\r\n\t\tvar tspan = createTSpan(\"Списки смежности:\", 50, (count + 1) * 50);\r\n\t\ttextGroup.appendChild(tspan);\r\n\t\tcount++;\r\n\t\t\r\n\t\tfor (var key1 in this.nodes) {\r\n\t\t\tvar currText = key1 + \": \";\r\n\t\t\tfor (var key2 in this.nodes[key1].neighbors) {\r\n\t\t\t\tcurrText+=key2+\", \";\r\n\t\t\t}\r\n\t\t\ttspan = createTSpan(currText, 50, (count + 1) * 50);\r\n\t\t\ttextGroup.appendChild(tspan);\r\n\t\t\t\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\t\r\n\t\tfunction createTSpan(text, x, y) {\r\n\t\t\tvar tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\r\n\t\t\ttspan.setAttribute(\"x\", x);\r\n\t\t\ttspan.setAttribute(\"y\", y);\r\n\t\t\ttspan.textContent = text;\r\n\t\t\treturn tspan;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default AdjacencyList;\n\n\n// WEBPACK FOOTER //\n// ./src/adjacency-list/adjacency-list.js","function createTSpan(text, x, y) {\r\n\tvar tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\r\n\ttspan.setAttribute(\"x\", x);\r\n\ttspan.setAttribute(\"y\", y);\r\n\ttspan.textContent = text;\r\n\treturn tspan;\r\n}\r\n\r\n//print adjacency list and bridges\r\nfunction printNodesAndBridgesText(nodes, bridges, textGroup) {\r\n\t    while (textGroup.lastChild) {\r\n            textGroup.removeChild(textGroup.lastChild);\r\n        }\r\n\tvar count = 0;\r\n\t\r\n\tvar tspan = createTSpan(\"Списки смежности:\", 50, (count + 1) * 50);\r\n\ttextGroup.appendChild(tspan);\r\n\tcount++;\r\n\t\r\n\tfor (var key1 in nodes) {\r\n\t\tvar currText = key1 + \": \";\r\n\t\tfor (var key2 in nodes[key1].neighbors) {\r\n\t\t\tcurrText+=key2+\", \";\r\n\t\t}\r\n\t\ttspan = createTSpan(currText, 50, (count + 1) * 50);\r\n\t\ttextGroup.appendChild(tspan);\r\n\t\t\r\n\t\tcount++;\r\n\t}\t\r\n\t\r\n\ttspan = createTSpan(\"Мосты:\", 50, (count + 1) * 50);\r\n\ttextGroup.appendChild(tspan);\r\n\tcount++;\r\n\t\r\n\tfor (var i = 0; i < bridges.length; i++, count++) {\t\t\r\n\t\ttspan = createTSpan(bridges[i].begin + \" -> \" + bridges[i].end + \"; \", 50, (count + 1) * 50);\r\n\t\ttextGroup.appendChild(tspan);\t\t\r\n\t}\r\n}\r\n\r\nfunction calculateDepthSearchAndFindBridges(nodes) {\r\n\tvar number = 1;\r\n\t\r\n\tvar num = {};\r\n\tvar top = {};\r\n\t//edges we walk in depth search\r\n\tvar bypassEdges = [];\r\n\t\r\n\tfor (var key in nodes) {\r\n\t\tnum[key] = 0;\r\n\t}\r\n\t\r\n\tfor (var key in nodes) {\r\n\t\tif (num[key] != 0) continue;\r\n\t\t\r\n\t\tsearchNode(undefined, key);\r\n\t}\r\n\t\r\n\tfunction searchNode(parentNode, currNode) {\r\n\t\tnum[currNode] = number; \r\n\t\ttop[currNode] = number;\r\n\t\tnumber++;\r\n\t\t\r\n\t\tfor (var key in nodes[currNode].neighbors) {\r\n\t\t\tif(num[key] == 0) {\r\n\t\t\t\tbypassEdges.push({\r\n\t\t\t\t\tbegin: currNode,\r\n\t\t\t\t\tend: key\r\n\t\t\t\t});\r\n\t\t\t\tsearchNode(currNode, key);\r\n\t\t\t\ttop[currNode] = Math.min(top[currNode], top[key]);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif(parentNode != key)\r\n\t\t\t\t\ttop[currNode] = Math.min(top[currNode], num[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn bypassEdges.filter((edge) => {\r\n\t\treturn top[edge.end] == num[edge.end];\r\n\t});\r\n}\r\n\r\n//nodes text: [\"a->b\", \"b->c\", \"\"]\r\nfunction findBridges(nodes, textGroup) {\r\n\treturn calculateDepthSearchAndFindBridges(nodes);\r\n}\r\n\r\nexport {findBridges};\n\n\n// WEBPACK FOOTER //\n// ./src/find-bridges/find-bridges.js","import SVGCatmullRomSpline from 'svg-catmull-rom-spline';\r\n\r\nfunction SvgGraphDrawer (svgField) {\r\n\tthis.svgField = svgField;\r\n\tthis.draw = function (nodes, edges) {\r\n\t\tthis.initializeField();\r\n\t\tthis.drawNodes(nodes);\r\n\t\tthis.drawEdges(nodes, edges);\r\n\t}\r\n\tthis.initializeField = function () {\r\n\t\tthis.svgField.innerHTML = \"\";\r\n\t\t\r\n\t\tthis.nodesGroup = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\n\t\tthis.nodesGroup.setAttribute('id', 'nodes');\r\n\r\n\t\tthis.edgesGroup = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\n\t\tthis.edgesGroup.setAttribute('id', 'edges');\r\n\t\t\r\n\t\tthis.svgField.appendChild(this.edgesGroup);\r\n\t\tthis.svgField.appendChild(this.nodesGroup);\r\n\t}\r\n\t\r\n\tthis.drawNodes = function (nodes) {\r\n\t\tfor(var key in  nodes){\r\n\t\t\tvar circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n\t\t\tcircle.setAttribute('cx', nodes[key].x);\r\n\t\t\tcircle.setAttribute('cy', nodes[key].y);\r\n\t\t\tif(nodes[key].type === \"fictive\") {\r\n\t\t\t\tcircle.setAttribute('stroke-dasharray', \"5\");\r\n\t\t\t}\r\n\t\t\tcircle.setAttribute('stroke', \"black\");\r\n\t\t\tcircle.setAttribute('stroke-width', 2);\r\n\t\t\t\r\n\t\t\tif (nodes[key].type === \"helpNode\") {\r\n\t\t\t\tcircle.setAttribute('fill', \"black\");\r\n\t\t\t\tcircle.setAttribute('r', 5);\r\n\t\t\t} else {\r\n\t\t\t\tcircle.setAttribute('fill', \"white\");\r\n\t\t\t\tcircle.setAttribute('r', 15);\r\n\t\t\t}\r\n\t\t\tthis.nodesGroup.appendChild(circle);\r\n\t\t\t\r\n\t\t\tif (nodes[key].type !== \"helpNode\") {\r\n\t\t\t\tvar text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n\t\t\t\ttext.setAttribute('x', nodes[key].x-2);\r\n\t\t\t\ttext.setAttribute('y', nodes[key].y+2);\r\n\t\t\t\ttext.setAttribute('fill', \"black\");\r\n\t\t\t\ttext.innerHTML= key;\r\n\t\t\t\tthis.nodesGroup.appendChild(text);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.drawEdges = function (nodes, edges) {\r\n\t\tfor (var i = 0; i < edges.length; i++) {\r\n\t\t\tvar line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n\t\t\tline.setAttribute('x1', nodes[edges[i].begin].x);\r\n\t\t\tline.setAttribute('y1', nodes[edges[i].begin].y);\r\n\t\t\tline.setAttribute('x2', nodes[edges[i].end].x);\r\n\t\t\tline.setAttribute('y2', nodes[edges[i].end].y);\r\n\t\t\tline.setAttribute('stroke', \"black\");\r\n\t\t\tline.setAttribute('stroke-width', 2);\r\n\t\t\tthis.edgesGroup.appendChild(line);\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.drawHelpLines = function (edges) {\r\n\t\tthis.helpEdgesGroup = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\n\t\tthis.svgField.insertBefore(this.helpEdgesGroup, this.svgField.children[0]);\r\n\t\tfor (var i = 0; i < edges.length; i++) {\r\n\t\t\tvar line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n\t\t\tline.setAttribute('x1', edges[i].begin.x);\r\n\t\t\tline.setAttribute('y1', edges[i].begin.y);\r\n\t\t\tline.setAttribute('x2', edges[i].end.x);\r\n\t\t\tline.setAttribute('y2', edges[i].end.y);\r\n\t\t\tline.setAttribute('stroke-dasharray', \"5\");\r\n\t\t\tline.setAttribute('stroke', \"black\");\r\n\t\t\tline.setAttribute('stroke-width', 2);\r\n\t\t\tthis.helpEdgesGroup.appendChild(line);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default SvgGraphDrawer;\n\n\n// WEBPACK FOOTER //\n// ./src/svg-graph-drawer/svg-graph-drawer.js","import AdjacencyList from 'adjacency-list';\r\nimport {findBridges} from 'find-bridges';\r\nimport PlaneWorker from 'plane-worker';\r\nimport SvgGraphDrawer from 'svg-graph-drawer';\r\n\r\nfunction HammaAlgorithmWorker (svgField) {\r\n\tthis.svgField = svgField;\r\n\tthis.makePlanarity = function (graph) {\r\n\t\tvar bridges = findBridges(graph.nodes);\r\n\t\tgraph.removeEdges(bridges);\r\n\t\tvar components = graph.getConnectedComponents();\r\n\t\tfor (var i = 0; i < components.length; i++) {\r\n\t\t\tthis.planarizeGraph(components[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//graph without bridges\r\n\tthis.planarizeGraph = function (graph) {\r\n\t\tvar loop = this.findLoop(graph);\r\n\t\tif (loop.path.length == 0) return; //дать координаты или что-то еще, если одна вершина\r\n\t\tvar planeWorker = new PlaneWorker();\r\n\t\tplaneWorker.initializeFromLoop(loop.path);\r\n\r\n\t\tvar svgGraphDrawer = new SvgGraphDrawer(svgField);\r\n\t\tsvgGraphDrawer.draw(planeWorker.nodes, planeWorker.edges);\r\n\t\tgraph.removeEdges(loop.edges); //убрать также вершины ни с чем не соединенные //мб не надо\r\n\t\t\r\n\t\tvar segments = this.findSegments(graph, planeWorker.addedNodes);;\r\n\t\tvar badSegments = [];\r\n\t\t//while segments.length != 0\r\n\t\tvar chain;\r\n\r\n\t\twhile (segments.length != 0) {\r\n\t\t\tthis.calculateGammaFromSegments(segments, planeWorker.planes);\r\n\t\t\tsegments.sort((segment1, segment2) => {\r\n\t\t\t\treturn segment1.gammaCount > segment2.gammaCount ? 1 : -1;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//remove one of the contact nodes\r\n\t\t\tif (segments[0].gammaCount === 0) {\r\n\t\t\t\tbadSegments.push(segments[0]);\r\n\t\t\t\tsegments.splice(0, 1);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tchain = this.findChain(segments[0], segments[0].contactNodes[0], segments[0].contactNodes[1]);\r\n\t\t\t//сделать приоритет грани, чтобы outer грань выбиралась последней\r\n\t\t\tsegments[0].planesIn.sort((plane1, plane2) => {\r\n\t\t\t\treturn plane1.isOuter === true ? 1: -1;\r\n\t\t\t});\r\n\t\t\tplaneWorker.addChain(chain, segments[0].planesIn[0]);\r\n\t\t\t\r\n\t\t\tthis.removeChain(graph, chain);\r\n\t\t\t\r\n\t\t\tsegments = this.findSegments(graph, planeWorker.addedNodes);\r\n\t\t\t\r\n\t\t\tsvgGraphDrawer.draw(planeWorker.nodes, planeWorker.edges);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t//awful algorithm, works in n^n time\r\n\tthis.findLoop = function (graph) {\r\n\t\tvar maxLoopLength = 0;\r\n\t\tvar pathResult = [];\r\n\t\t\r\n\t\tfor (var key in graph.nodes) {\r\n\t\t\tvar path = [];\r\n\t\t\tpath.push(key);\r\n\t\t\t\r\n\t\t\tsearchLoopInNeighbors(path.slice(), key, graph);\r\n\t\t}\r\n\t\t\r\n\t\treturn transformPathResultToLoopAndEdges(pathResult);\r\n\t\t\r\n\t\tfunction searchLoopInNeighbors(path, nodeName, graph) {\r\n\t\t\tfor (var key in graph.nodes[nodeName].neighbors) {\r\n\t\t\t\t//if node already was in our path we compare loop length with max loop length\r\n\t\t\t\tvar loopLength = getLoopLength(path, key);\r\n\t\t\t\tif (loopLength > maxLoopLength) {\r\n\t\t\t\t\tmaxLoopLength = loopLength;\r\n\t\t\t\t\tpathResult = path.slice();\r\n\t\t\t\t}\r\n\t\t\t\telse if (loopLength === 0) {\r\n\t\t\t\t\tvar newPath = path.slice();\r\n\t\t\t\t\tnewPath.push(key);\r\n\t\t\t\t\tsearchLoopInNeighbors(newPath, key, graph);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getLoopLength(path, nodeName) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tif (path[i] === nodeName) return path.length - i;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction transformPathResultToLoopAndEdges(pathResult) {\r\n\t\t\tvar loop = [];\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < pathResult.length - 1; i++) {\r\n\t\t\t\tloop.push({\r\n\t\t\t\t\tbegin: pathResult[i],\r\n\t\t\t\t\tend: pathResult[i + 1]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tloop.push({\r\n\t\t\t\tbegin: pathResult[0],\r\n\t\t\t\tend: pathResult[pathResult.length - 1]\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tpath: pathResult,\r\n\t\t\t\tedges: loop\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//find all segments that \"touches\" an added nodes\r\n\tthis.findSegments = function (graph, addedNodes) {\r\n\t\tvar visitedNodes = {};\r\n\t\tvar segments = [];\r\n\t\t\r\n\t\tfor (var key in graph.nodes) {\r\n\t\t\tif (visitedNodes[key]) continue;\r\n\t\t\tvisitedNodes[key] = true;\r\n\t\t\t\r\n\t\t\tif (includes(addedNodes, key)) {\r\n\t\t\t\tcheckContactNode(key, graph, segments, addedNodes);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar segment = {\r\n\t\t\t\tcontactNodes: [],\r\n\t\t\t\tgraph: new AdjacencyList()\r\n\t\t\t};\r\n\t\t\tsegment.graph.addNode(key);\r\n\t\t\tsearchSegment(segment, key, addedNodes, graph);\r\n\t\t\tsegments.push(segment);\r\n\t\t}\r\n\t\t\r\n\t\treturn segments;\r\n\t\t\r\n\t\tfunction includes (array, key) {\r\n\t\t\tfor (var i = 0; i < array.length; i++) {\r\n\t\t\t\tif (array[i] === key) return true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tfunction checkContactNode (node, graph, segments, addedNodes) {\r\n\t\t\tfor (var neighbor in graph.nodes[node].neighbors) {\r\n\t\t\t\t\tif (includes(addedNodes, neighbor) && !visitedNodes[neighbor]) {\r\n\t\t\t\t\t\tvar segment = {\r\n\t\t\t\t\t\t\tcontactNodes: [],\r\n\t\t\t\t\t\t\tgraph:  new AdjacencyList()\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tsegment.graph.addNode(node);\r\n\t\t\t\t\t\tsegment.contactNodes.push(node);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsegment.graph.addNode(neighbor);\r\n\t\t\t\t\t\tsegment.contactNodes.push(neighbor);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsegment.graph.addEdge(node, neighbor);\r\n\t\t\t\t\t\tsegments.push(segment);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//node is not in the addedNodes\r\n\t\tfunction searchSegment(segment, node, addedNodes, graph) {\r\n\t\t\tvisitedNodes[node] = true;\r\n\t\t\tfor (var neighbor in graph.nodes[node].neighbors) {\r\n\t\t\t\t\r\n\t\t\t\tsegment.graph.addNode(neighbor);\r\n\t\t\t\tsegment.graph.addEdge(node, neighbor);\r\n\t\t\t\t\r\n\t\t\t\tif (includes(addedNodes, neighbor)) {\r\n\t\t\t\t\tsegment.contactNodes.push(neighbor);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!visitedNodes[neighbor]) {\r\n\t\t\t\t\tsearchSegment(segment, neighbor, addedNodes, graph);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.calculateGammaFromSegments = function (segments, planes) {\r\n\t\tfor (var i = 0; i < segments.length; i++) {\r\n\t\t\tsegments[i].planesIn = [];\r\n\t\t\tvar gammaCount = 0;\r\n\t\t\tfor (var j = 0; j < planes.length; j++) {\r\n\t\t\t\tif (isSegmentIn(segments[i].contactNodes, planes[j].loop)) {\r\n\t\t\t\t\tgammaCount++;\r\n\t\t\t\t\tsegments[i].planesIn.push(planes[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsegments[i].gammaCount = gammaCount; //добавить сортировку граней (внутренняя - не внутренняя)\r\n\t\t}\r\n\t\t\r\n\t\tfunction isSegmentIn(contactNodes, loop) {\r\n\t\t\tfor (var i = 0; i < contactNodes.length; i++) {\r\n\t\t\t\tvar isNodeInLoop = false;\r\n\t\t\t\tfor (var j = 0; j < loop.length; j++) {\r\n\t\t\t\t\tif (contactNodes[i] === loop[j]) {\r\n\t\t\t\t\t\tisNodeInLoop = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!isNodeInLoop) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t//Find path from start to end in segment\r\n\tthis.findChain = function (segment, start, end) {\r\n\t\tvar path = [];\r\n\t\tpath.push(start);\r\n\t\t\r\n\t\tvar visitedNodes = {};\r\n\t\tif (end === undefined) {\r\n\t\t\treturn deepSearch(segment, undefined, start, start, path);\r\n\t\t}\r\n\t\treturn deepSearch(segment, undefined, start, end, path);\r\n\t\t\r\n\t\tfunction deepSearch(segment, prev, current, end, path) {\r\n\t\t\tfor (var key in segment.graph.nodes[current].neighbors) {\r\n\t\t\t\tif (key === prev) continue;\r\n\t\t\t\tif (visitedNodes[key]) continue;\r\n\t\t\t\tif (key === end) {\r\n\t\t\t\t\tpath.push(end);\r\n\t\t\t\t\treturn path;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvisitedNodes[key] = true;\r\n\t\t\t\tvar newPath = path.slice();\r\n\t\t\t\tnewPath.push(key);\r\n\t\t\t\tvar res = deepSearch(segment, current, key, end, newPath);\r\n\t\t\t\tif (res != []) {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tthis.removeChain = function (graph, chain) {\r\n\t\tvar chainToDelete = [];\r\n\t\tfor (var i = 0; i < chain.length - 1; i++) {\r\n\t\t\tchainToDelete.push({\r\n\t\t\t\tbegin: chain[i],\r\n\t\t\t\tend: chain[i + 1]\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tchainToDelete.push({\r\n\t\t\tbegin: chain[0],\r\n\t\t\tend: chain[chain.length - 1]\r\n\t\t});\r\n\t\t\r\n\t\tgraph.removeEdgesWithRemovingAloneNodes(chainToDelete);\r\n\t}\r\n}\r\n\r\nexport default HammaAlgorithmWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/hamma-algorithm/hamma-algorithm.js","var nodes;\r\nvar edges;\r\n\r\n//������������ ����� �������\r\nvar l = 100;\r\n//����������� ��������� �������\r\nvar k1 = 2;\r\n//����������� ���� ������������\r\nvar k2 = 200000;\r\n\r\nvar delta = 0.1;\r\n\r\nfunction clear(nodesGroup, edgesGroup){\r\n\tnodesGroup.innerHTML=\"\";\r\n\tedgesGroup.innerHTML=\"\";\r\n}\r\nfunction getNodesAndEdges(nodesText){\r\n\tnodes={};\r\n\tedges={};\r\n\tfor(var i = 0; i< nodesText.length; i++)\r\n\t{\r\n\t\tif ( nodesText[i]!=\"\")\r\n\t\t{\r\n\t\t\tvar currNode = nodesText[i].split(\"->\");\r\n\t\t\tnodes[currNode[0]] = {name: currNode[0]};\r\n\t\t\tif(currNode[1])\r\n\t\t\t{\t\t\r\n\t\t\t\tnodes[currNode[1]] = {name: currNode[1]};\r\n\t\t\t\tif(!edges[currNode[0]])\r\n\t\t\t\t\tedges[currNode[0]]={};\r\n\t\t\t\tedges[currNode[0]][currNode[1]]=true;\r\n\t\t\t\t\r\n\t\t\t\t//����� ���� �������� � ������������������ �������\r\n\t\t\t\tif(!edges[currNode[1]])\r\n\t\t\t\t\tedges[currNode[1]]={};\r\n\t\t\t\tedges[currNode[1]][currNode[0]]=true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nfunction randomizeNodeCoordinates(height, width){\r\n\tfor(var key in nodes){\r\n\t\tnodes[key].x =Math.floor(Math.random() * (width - 0 + 1)) + 0;\r\n\t\tnodes[key].y =Math.floor(Math.random() * (height - 0 + 1)) + 0;\r\n\t}\r\n}\r\nfunction drawGraph(nodesGroup, edgesGroup){\r\n\tfor(var key in  nodes){\r\n\t\tvar circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n\t\tcircle.setAttribute('cx', nodes[key].x);\r\n\t\tcircle.setAttribute('cy', nodes[key].y);\r\n\t\tcircle.setAttribute('r', 15);\r\n\t\tcircle.setAttribute('stroke', \"black\");\r\n\t\tcircle.setAttribute('stroke-width', 2);\r\n\t\tcircle.setAttribute('fill', \"white\");\t\t\r\n\t\tnodesGroup.appendChild(circle);\r\n\t\t\r\n\t\tvar text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n\t\ttext.setAttribute('x', nodes[key].x-2);\r\n\t\ttext.setAttribute('y', nodes[key].y+2);\r\n\t\ttext.setAttribute('fill', \"black\");\r\n\t\ttext.innerHTML= key;\r\n\t\tnodesGroup.appendChild(text);\r\n\t}\r\n\t\r\n\tfor(var key1 in edges){\t\t\r\n\t\tfor(var key2 in edges[key1]){\r\n\t\t\tvar line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n\t\t\tline.setAttribute('x1', nodes[key1].x);\r\n\t\t\tline.setAttribute('y1', nodes[key1].y);\r\n\t\t\tline.setAttribute('x2', nodes[key2].x);\r\n\t\t\tline.setAttribute('y2', nodes[key2].y);\r\n\t\t\tline.setAttribute('stroke', \"black\");\r\n\t\t\tline.setAttribute('stroke-width', 2);\r\n\t\t\tedgesGroup.appendChild(line);\r\n\t\t}\r\n\t}\r\n}\r\nfunction distance(node1, node2){\r\n\tvar x = nodes[node1].x-nodes[node2].x;\r\n\tvar y = nodes[node1].y-nodes[node2].y;\r\n\treturn Math.sqrt(x*x + y*y);\r\n}\r\nfunction calculatePowerXForEachNode(){\r\n\tfor(var p in nodes){\r\n\t\tvar f=0;\r\n\t\tfor(var q in edges[p]){\r\n\t\t\tif (edges[p][q]==undefined)continue;\r\n\t\t\tvar d = distance(p,q);\r\n\t\t\tif (d == 0) continue;\r\n\t\t\tf+=k1 * (d - l) * (nodes[q].x - nodes[p].x) / d;\r\n\t\t}\r\n\t\tvar g=0;\r\n\t\tfor(var q in nodes){\r\n\t\t\t//if(edges[p][q]!=undefined||q==p)continue;\r\n\t\t\tif(q==p)continue;\r\n\t\t\tvar d = distance(p,q);\r\n\t\t\tif (d == 0) continue;\r\n\t\t\tg+=k2 * (nodes[p].x - nodes[q].x) / (d * d)  / d;\r\n\t\t}\r\n\t\tnodes[p].FX=f+g;\r\n\t}\r\n}\r\nfunction calculatePowerYForEachNode(){\r\n\tfor(var p in nodes){\r\n\t\tvar f=0;\r\n\t\tfor(var q in edges[p]){\r\n\t\t\tif (edges[p][q]==undefined)continue;\r\n\t\t\tvar d = distance(p,q);\r\n\t\t\tif (d == 0) continue;\r\n\t\t\tf+=k1 * (d - l) * (nodes[q].y - nodes[p].y) / d;\r\n\t\t}\r\n\t\tvar g=0;\r\n\t\tfor(var q in nodes){\r\n\t\t\t//if(edges[p][q]!=undefined||q==p)continue;\r\n\t\t\tif(q==p)continue;\r\n\t\t\tvar d = distance(p,q);\r\n\t\t\tif (d == 0) continue;\r\n\t\t\tg+=k2 * (nodes[p].y - nodes[q].y) / (d * d)   / d;\r\n\t\t}\r\n\t\tnodes[p].FY= f + g;\r\n\t}\r\n}\r\nfunction addExtention(){\r\n\tfor(var node in nodes){\r\n\t\tnodes[node].x+=delta*nodes[node].FX;\r\n\t\tnodes[node].y+=delta*nodes[node].FY;\r\n\t\t//nodes[node].x=nodes[node].FX;\r\n\t\t//nodes[node].y=nodes[node].FY;\r\n\t\tif (nodes[node].x < 15) nodes[node].x = 15;\r\n\t\tif (nodes[node].y < 15) nodes[node].y = 15;\r\n\t}\r\n}\r\nfunction firstStep(nodesText, timerId, height, width, nodesGroup, edgesGroup){\r\n\tif(timerId)\r\n\t\tclearInterval(timerId);\r\n\tclear(nodesGroup, edgesGroup);\r\n\tgetNodesAndEdges(nodesText);\r\n\trandomizeNodeCoordinates(height, width);\r\n\tdrawGraph(nodesGroup, edgesGroup);\r\n}\r\nfunction makeOneStabilization(nodesGroup, edgesGroup){\r\n\tcalculatePowerXForEachNode();\r\n\tcalculatePowerYForEachNode();\r\n\taddExtention();\r\n\tclear(nodesGroup, edgesGroup);\r\n\tdrawGraph(nodesGroup, edgesGroup);\r\n}\r\nfunction startStabilization(timerId, nodesGroup, edgesGroup){\r\n\t/*if(timerId)\r\n\t\tclearInterval(timerId);*/\r\n\ttimerId = setInterval(makeOneStabilization, 150, nodesGroup, edgesGroup);\r\n\treturn timerId;\r\n}\r\nexport {firstStep, makeOneStabilization, startStabilization};\n\n\n// WEBPACK FOOTER //\n// ./src/spring-embedder/spring-embedder.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.scss\n// module id = 5\n// module chunks = 0","import {firstStep, makeOneStabilization, startStabilization} from 'spring-embedder';\r\n\r\nimport AdjacencyList from 'adjacency-list';\r\nimport {findBridges} from 'find-bridges';\r\nimport HammaAlgorithmWorker from 'hamma-algorithm';\r\n\r\nimport './main.scss';\r\n\r\nvar height = 800;\r\nvar width = 1500;\r\n\r\nvar timerId;\r\n\r\nvar drawField = document.getElementById(\"drawField\");\r\ndrawField.setAttribute('height', height + \"px\");\r\ndrawField.setAttribute('width', width + \"px\");\r\n/*1->2;2->3;3->4;4->5;5->6;6->7;7->8; 11->12;12->13;13->14;\r\n14->15;15->16;16->17;17->18; 21->22;22->23;23->24;24->25;25->26;26->27;27->28;\r\n 1->11;2->12;3->13;4->14;5->15;6->16;7->17;8->18; 21->11;22->12;23->13;24->14;25->15;26->16;27->17;28->18;\r\n 24->24a;25->25a;24a->25a;23->24a; 2a->2;2b->2;2c->2; 8a->8;8b->8;8c->8; 26a->26;27a->27;28a->28;26a->27a;27a->28a;\r\n 27a->28;27a->27b;27b->27c;27c->27h;27f->27c;27h->27f;*/\r\n/*document.getElementById(\"nodes-input\").value = `1->2;1->6;\r\n2->3;2->5;2->9;2->10;\r\n3->4;3->5;\r\n4->5;\r\n6->7;6->8;\r\n7->8;\r\n9->10;\r\n9->11;\r\n10->11;`;\r\n*/\r\n/*document.getElementById(\"nodes-input\").value = `a->b; a->c; a->d; a->e; a->f; a->k;\r\na->l;\r\nb->c; b->d; b->e; b->f; b->k; b->l;\r\nc->d; c->e; c->f; c->k; c->l;\r\nd->e; d->f; d->k; d->l;\r\ne->f; e->k; e->l;\r\nf->k;f->l;\r\nk->l;`;*/\r\n/*1->2;1->3;1->4;1->4;1->5;\r\n2->3;2->4;2->5;\r\n3->4;3->5;\r\n4->5;*/\r\ndocument.getElementById(\"nodes-input\").value = `1->2;1->3;1->4;1->4;1->5;\r\n2->3;2->4;2->5;\r\n3->4;3->5;\r\n4->5;`;\r\nvar nodesGroup = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\nnodesGroup.setAttribute('id', 'nodes');\r\n\r\nvar edgesGroup = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\nedgesGroup.setAttribute('id', 'edges');\r\n\r\nvar textGroup = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\n\r\ndrawField.appendChild(edgesGroup);\r\ndrawField.appendChild(nodesGroup);\r\ndrawField.appendChild(textGroup);\r\n\r\nvar toDraw = document.getElementById(\"to-draw\");\r\ntoDraw.addEventListener('click', function() {\r\n\tvar nodesText = document.getElementById(\"nodes-input\").value.replace(/ |\\n/g,'').split(';');\r\n\tfirstStep(nodesText, timerId, height, width, nodesGroup, edgesGroup);\r\n});\r\n\r\nvar calculateOffset = document.getElementById(\"calculate-offset\");\r\ncalculateOffset.addEventListener('click', function() {\r\n\tmakeOneStabilization(nodesGroup, edgesGroup);\r\n});\r\n\r\nvar startStab = document.getElementById(\"start-stabilization\");\r\nstartStab.addEventListener('click', function() {\r\n\ttimerId = startStabilization(timerId, nodesGroup, edgesGroup);\r\n});\r\n\r\nvar planarityFirstStep = document.getElementById(\"find-bridges\");\r\n\r\nplanarityFirstStep.addEventListener('click', function() {\r\n\tvar nodesText = document.getElementById(\"nodes-input\").value.replace(/ |\\n/g,'').split(';');\r\n\t\r\n\tvar initGraph = new AdjacencyList();\r\n\tinitGraph.initializeFromText(nodesText);\r\n\t\r\n\tvar hammaAlgorithmWorker = new HammaAlgorithmWorker(drawField);\r\n\thammaAlgorithmWorker.makePlanarity(initGraph);\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Plane from 'plane';\r\nimport SvgGraphDrawer from 'svg-graph-drawer';\r\n\r\nconst canvasSize = {\r\n\twidth: 800,\r\n\theight: 800\r\n}\r\n\r\nconst nodeRadius = 15;\r\n\r\nconst canvasCorners = {\r\n\ttopLeft: {\r\n\t\tx: nodeRadius,\r\n\t\ty: nodeRadius,\r\n\t\ttype: \"fictive\"\r\n\t},\r\n\ttopRight: {\r\n\t\tx: canvasSize.width - nodeRadius,\r\n\t\ty: nodeRadius,\r\n\t\ttype: \"fictive\"\r\n\t},\r\n\tbottomLeft: {\r\n\t\tx: nodeRadius,\r\n\t\ty: canvasSize.height - nodeRadius,\r\n\t\ttype: \"fictive\"\r\n\t},\r\n\tbottomRight: {\r\n\t\tx: canvasSize.width - nodeRadius,\r\n\t\ty: canvasSize.height - nodeRadius,\r\n\t\ttype: \"fictive\"\r\n\t}\r\n};\r\n\r\nconst center = {\r\n\tx: 400,\r\n\ty: 400\r\n};\r\n\r\nlet uniqueHelpPointId = 1;\r\n\r\nfunction PlaneWorker () {//добавить хранилище контактных вершин\r\n\tthis.initializeFromLoop = function (loop) {\r\n\t\tthis.nodes = {};\r\n\t\tthis.edges = [];\r\n\t\tthis.addedNodes = loop.slice();\r\n\t\t\r\n\t\tvar radius = loop.length * 25;\r\n\t\tradius = Math.min(radius, 300);\r\n\r\n\t\tvar angle = (2 * Math.PI) / loop.length;\r\n\t\t\r\n\t\tfor (var i = 0; i < loop.length; i++) {\r\n\t\t\tthis.nodes[loop[i]] = {\r\n\t\t\t\tx: center.x + radius * Math.cos(i * angle),\r\n\t\t\t\ty: center.y + radius * Math.sin(i * angle),\r\n\t\t\t\ttype: \"normal\"\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tfor (var i = 0; i < loop.length - 1; i++) {\r\n\t\t\tthis.edges.push({\r\n\t\t\t\tbegin: loop[i],\r\n\t\t\t\tend: loop[i + 1]\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.edges.push({\r\n\t\t\tbegin: loop[0],\r\n\t\t\tend: loop[loop.length - 1]\r\n\t\t});\r\n\t\t\r\n\t\t//понять, надо ли добавить фиктивные ребра\r\n\t\t\r\n\t\tthis.nodes[\"topLeft\"] = canvasCorners.topLeft;\r\n\t\tthis.nodes[\"topRight\"] = canvasCorners.topRight;\r\n\t\tthis.nodes[\"bottomLeft\"] = canvasCorners.bottomLeft;\r\n\t\tthis.nodes[\"bottomRight\"] = canvasCorners.bottomRight;\r\n\t\tthis.nodes[\"touchPoint\"] = {\r\n\t\t\tx: canvasSize.width - nodeRadius,\r\n\t\t\ty: this.nodes[loop[0]].y,\r\n\t\t\ttype: \"fictive\"\r\n\t\t}\r\n\t\t\r\n\t\tthis.planes = [];\r\n\t\tthis.planes.push(new Plane(loop, false));\r\n\t\t\r\n\t\tvar outerLoop = loop.slice();\r\n\t\touterLoop.push(loop[0]);\r\n\t\touterLoop.push(\"touchPoint\");\r\n\t\touterLoop.push(\"topRight\");\r\n\t\touterLoop.push(\"topLeft\");\r\n\t\touterLoop.push(\"bottomLeft\");\r\n\t\touterLoop.push(\"bottomRight\");\r\n\t\touterLoop.push(\"touchPoint\");\r\n\t\tthis.planes.push(new Plane(outerLoop, true));  //добавь тип грани(внутр внешн)\r\n\t}\r\n\t\r\n\tthis.addChain = function (chain, plane) {\r\n\t\tvar triangles = findTriangles(plane, this.nodes);\r\n\t\t\r\n\t\tvar path = findPathFromTriangles(chain, triangles, plane.loop, this.nodes);\r\n\t\t\r\n\t\tpath = putChainToPath(path, chain);\r\n\t\t\r\n\t\taddPathToGraph(path, this.nodes, this.edges);\r\n\t\t\r\n\t\t//var newPlanes = plane.addChain(chain);\r\n\t\tvar helpPlaneInfo = {};\r\n\t\tif (plane.isOuter) {\r\n\t\t\thelpPlaneInfo = isPlaneLoopBroken(plane.loop, path, this.nodes);\r\n\t\t}\r\n\t\tvar newPlanes = plane.addChain(path.map(pathItem => {\r\n\t\t\treturn pathItem.name;\r\n\t\t}), helpPlaneInfo);\r\n\t\t\r\n\t\tthis.planes = this.planes.filter(item => {\r\n\t\t\tif (item.id === plane.id) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\t\r\n\t\tthis.planes.push(newPlanes[0]);\r\n\t\tthis.planes.push(newPlanes[1]);\r\n\t\t\r\n\t\tfunction findTriangles (plane, nodes) {\r\n\t\t\tvar triangles = [];\r\n\t\t\tvar edges = getEdgesFromLoop(plane.loop, nodes)\r\n\t\t\tvar newEdges = [];\r\n\t\t\tvar loop = plane.loop.slice();\r\n\t\t\tfor (var i = 0; loop.length > 3; i++) {\r\n\t\t\t\tvar startName = loop[i % loop.length];\r\n\t\t\t\tvar middle = loop[(i + 1) % loop.length];\r\n\t\t\t\tvar endName = loop[(i + 2) % loop.length];\r\n\t\t\t\tif (isCrosingWithPolygonEdges(nodes[startName], nodes[endName], edges)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (isCrosingWithPolygonEdges(nodes[startName], nodes[endName], newEdges)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isNodeInsidePoligone({\r\n\t\t\t\t\tx: (nodes[startName].x + nodes[endName].x)/2,\r\n\t\t\t\t\ty: (nodes[startName].y + nodes[endName].y)/2\r\n\t\t\t\t}, plane, nodes)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttriangles.push([startName, middle, endName]);\r\n\t\t\t\tnewEdges.push({\r\n\t\t\t\t\tbegin: {\r\n\t\t\t\t\t\tx: nodes[startName].x,\r\n\t\t\t\t\t\ty: nodes[startName].y\r\n\t\t\t\t\t},\r\n\t\t\t\t\tend: {\r\n\t\t\t\t\t\tx: nodes[endName].x,\r\n\t\t\t\t\t\ty: nodes[endName].y\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tloop.splice((i + 1) % loop.length,1);\r\n\t\t\t}\r\n\t\t\ttriangles.push([loop[0], loop[1], loop[2]]);\r\n\t\t\t\r\n\t\t\tvar svgField = document.getElementById(\"drawField\");\r\n\t\t\tvar svgGraphDrawer = new SvgGraphDrawer(svgField);\r\n\t\t\tsvgGraphDrawer.drawHelpLines(newEdges);\r\n\t\t\treturn triangles;\r\n\t\t\t\r\n\t\t\tfunction getEdgesFromLoop (loop, nodes) {\r\n\t\t\t\tvar edges = [];\r\n\t\t\t\tfor (var i = 0; i < plane.loop.length - 1; i++) {\r\n\t\t\t\t\tedges.push({\r\n\t\t\t\t\t\tbegin: {\r\n\t\t\t\t\t\t\tx: nodes[loop[i]].x,\r\n\t\t\t\t\t\t\ty: nodes[loop[i]].y\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tend: {\r\n\t\t\t\t\t\t\tx: nodes[loop[i + 1]].x,\r\n\t\t\t\t\t\t\ty: nodes[loop[i + 1]].y\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tedges.push({\r\n\t\t\t\t\tbegin: {\r\n\t\t\t\t\t\t\tx: nodes[loop[0]].x,\r\n\t\t\t\t\t\t\ty: nodes[loop[0]].y\r\n\t\t\t\t\t},\r\n\t\t\t\t\tend: {\r\n\t\t\t\t\t\t\tx: nodes[loop[loop.length - 1]].x,\r\n\t\t\t\t\t\t\ty: nodes[loop[loop.length - 1]].y\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn edges;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction isCrosingWithPolygonEdges(start, end, edges) {\r\n\t\t\t\tfor (var i = 0; i < edges.length; i++) {\r\n\t\t\t\t\tif (areCrossing(start, end, edges[i].begin, edges[i].end)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction areCrossing (p1, p2, p3, p4) {\r\n\t\t\t\tvar v1 = vectorMult(p4.x - p3.x, p4.y - p3.y, p1.x - p3.x, p1.y - p3.y);\r\n\t\t\t\tvar v2 = vectorMult(p4.x - p3.x, p4.y - p3.y, p2.x - p3.x, p2.y - p3.y);\r\n\t\t\t\tvar v3 = vectorMult(p2.x - p1.x, p2.y - p1.y, p3.x - p1.x, p3.y - p1.y);\r\n\t\t\t\tvar v4 = vectorMult(p2.x - p1.x, p2.y - p1.y, p4.x - p1.x, p4.y - p1.y);\r\n\t\t\t\tif (v1 == 0 && v2 == 0 && v3 == 0 && v4 == 0) {\r\n\t\t\t\t\tvar l1 = Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\r\n\t\t\t\t\tvar l2 = Math.sqrt(sqr(p3.x - p4.x) + sqr(p3.y - p4.y));\r\n\t\t\t\t\treturn sqr((p1.x + p2.x) - (p3.x + p4.x)) + sqr((p1.y + p2.y) - (p3.y + p4.y)) <= sqr(l1 + l2);\r\n\t\t\t\t}\r\n\t\t\t\tif ((v1 * v2) < 0 && (v3 * v4) < 0 ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t\t\r\n\t\t\t\tfunction vectorMult (ax, ay, bx, by) {\r\n\t\t\t\t\treturn ax * by - bx * ay;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfunction sqr (x) {\r\n\t\t\t\t\treturn x*x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction isNodeInsidePoligone (point, plane, nodes) {\r\n\t\t\t\t//https://github.com/substack/point-in-polygon\r\n\t\t\t\tvar x = point.x, y = point.y;\r\n\t\t\t\tvar inside = false;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0, j = plane.loop.length - 1; i < plane.loop.length; j = i++) {\r\n\t\t\t\t\tvar xi = nodes[plane.loop[i]].x, yi = nodes[plane.loop[i]].y;\r\n\t\t\t\t\tvar xj = nodes[plane.loop[j]].x, yj = nodes[plane.loop[j]].y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar intersect = ((yi > y) != (yj > y)) \r\n\t\t\t\t\t\t&& (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n\t\t\t\t\tif (intersect) {\r\n\t\t\t\t\t\tinside = !inside;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn inside;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t/*function isNormalAnlges(point1, point2, point3) {\r\n\t\t\t\tvar normalAngle = 5;\r\n\t\t\t\tvar a = getLengthOfLineSegment(point1, point2);\r\n\t\t\t\tvar b = getLengthOfLineSegment(point2, point3);\r\n\t\t\t\tvar c = getLengthOfLineSegment(point1, point3);\r\n\t\t\t\t\r\n\t\t\t\tvar kc = Math.acos(((a*a)+(b*b)-(c*c))/(2*a*b));\r\n\t\t\t\tkc = (kc*180)/Math.PI;\r\n\t\t\t\tvar kb = Math.acos(((a*a)+(c*c)-(b*b))/(2*a*c));\r\n\t\t\t\tkb = (kb*180)/Math.PI;\r\n\t\t\t\tvar ka = Math.acos(((c*c)+(b*b)-(a*a))/(2*c*b));\r\n\t\t\t\tka = (ka*180)/Math.PI;\r\n\t\t\t\t\r\n\t\t\t\tif (kc < normalAngle || kb < normalAngle || ka < normalAngle) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfunction getLengthOfLineSegment(point1, point2) {\r\n\t\t\t\t\tvar x = point1.x - point2.x;\r\n\t\t\t\t\tvar y = point1.y - point2.y;\r\n\t\t\t\t\treturn Math.sqrt(x*x + y*y);\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t}\r\n\t\t\r\n\t\tfunction findPathFromTriangles(chain, triangles, loop, nodes) {\r\n\t\t\tvar trianglesPath = [];\r\n\t\t\tvar triangelsToSearch = triangles.map(triangleItem => ({\r\n\t\t\t\tisVisited: false,\r\n\t\t\t\ttriangle: triangleItem\r\n\t\t\t}));\r\n\t\t\t//get triangles that contains chain init node\r\n\t\t\tfor (var i = 0; i < triangelsToSearch.length; i++) {\r\n\t\t\t\tif (isNodeInTriangle(chain[0], triangelsToSearch[i].triangle)) {\r\n\t\t\t\t\ttrianglesPath.push({\r\n\t\t\t\t\t\tpath: [],\r\n\t\t\t\t\t\ttriangle: triangelsToSearch[i].triangle\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttriangelsToSearch[i].isVisited = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//add method, if chain starts and ends in the same place\r\n\t\t\t\r\n\t\t\t//find if possible triangles, that contains first and last elements from chain\r\n\t\t\tfor (var i = 0; i < trianglesPath.length; i++) {\r\n\t\t\t\tif (isNodeInTriangle(chain[chain.length - 1], trianglesPath[i].triangle)) {\r\n\t\t\t\t\t//add support of long path\r\n\t\t\t\t\treturn handleOneTrianglePath(trianglesPath[i].triangle, chain[0], chain[chain.length - 1], loop, nodes);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar isPathFind = false;\r\n\t\t\tvar prePath = [];\r\n\t\t\twhile (!isPathFind) {\r\n\t\t\t\tvar newTrianglesPath = [];\r\n\t\t\t\tfor (var i = 0; i < trianglesPath.length; i++) {\r\n\t\t\t\t\tfor (var j = 0; j < triangelsToSearch.length; j++) {\r\n\t\t\t\t\t\tif (triangelsToSearch[j].isVisited) continue;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar contactEdge = FindIfTriangleTouchAnotherTriangle(trianglesPath[i].triangle, triangelsToSearch[j].triangle);\r\n\t\t\t\t\t\tif (contactEdge !== undefined) {\r\n\t\t\t\t\t\t\tvar newPath = trianglesPath[i].path.slice();\r\n\t\t\t\t\t\t\tnewPath.push(contactEdge);\r\n\t\t\t\t\t\t\tnewTrianglesPath.push({\r\n\t\t\t\t\t\t\t\tpath: newPath,\r\n\t\t\t\t\t\t\t\ttriangle: triangelsToSearch[j].triangle\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttriangelsToSearch[j].isVisited = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrianglesPath = newTrianglesPath;\r\n\t\t\t\t\r\n\t\t\t\tfor (var k = 0; k < trianglesPath.length; k++) {\r\n\t\t\t\t\tif (isNodeInTriangle(chain[chain.length - 1], trianglesPath[k].triangle)) {\r\n\t\t\t\t\t\tisPathFind = true;\r\n\t\t\t\t\t\tprePath = trianglesPath[k].path;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar path = convertTrianglesPath(prePath, nodes, chain);\r\n\t\t\t\r\n\t\t\treturn path;\r\n\t\t\t\r\n\t\t\tfunction isNodeInTriangle(node, triangle) {\r\n\t\t\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\t\t\tif (triangle[j] === node) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction handleOneTrianglePath(triangle, node1, node2, loop, nodes) {\r\n\t\t\t\tif (!isEdgeInLoop(node1, node2, loop)) {\r\n\t\t\t\t\tvar path = [];\r\n\t\t\t\t\tpath.push(getPathElem(node1, nodes));\r\n\t\t\t\t\tpath.push(getPathElem(node2, nodes));\r\n\t\t\t\t\treturn path;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar p1 = {\r\n\t\t\t\t\tx: nodes[triangle[0]].x,\r\n\t\t\t\t\ty: nodes[triangle[0]].y\r\n\t\t\t\t};\r\n\t\t\t\tvar p2 = {\r\n\t\t\t\t\tx: nodes[triangle[1]].x,\r\n\t\t\t\t\ty: nodes[triangle[1]].y\r\n\t\t\t\t};\r\n\t\t\t\tvar p3 = {\r\n\t\t\t\t\tx: nodes[triangle[2]].x,\r\n\t\t\t\t\ty: nodes[triangle[2]].y\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tvar x = (p1.x + p2.x + p3.x)/3;\r\n\t\t\t\tvar y = (p1.y + p2.y + p3.y)/3;\r\n\t\t\t\t\r\n\t\t\t\tvar path = [];\r\n\t\t\t\tpath.push(getPathElem(node1, nodes));\r\n\t\t\t\tpath.push({\r\n\t\t\t\t\tname: \"helpNode\" + uniqueHelpPointId,\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\ttype: \"helpNode\"\r\n\t\t\t\t})\r\n\t\t\t\tpath.push(getPathElem(node2, nodes));\r\n\t\t\t\tuniqueHelpPointId++;\r\n\t\t\t\t\r\n\t\t\t\tfunction getPathElem(nodeName, nodes) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: nodeName,\r\n\t\t\t\t\t\tx: nodes[nodeName].x,\r\n\t\t\t\t\t\ty: nodes[nodeName].y,\r\n\t\t\t\t\t\ttype: nodes[nodeName].type\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction isEdgeInLoop(node1, node2, loop) {\r\n\t\t\t\tfor (var i = 0; i < loop.length; i++) {\r\n\t\t\t\t\tif (loop[i] === node1) {\r\n\t\t\t\t\t\tvar prev = i - 1, next = i + 1;\r\n\t\t\t\t\t\tif (next === loop.length) {\r\n\t\t\t\t\t\t\tnext = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (prev === -1) {\r\n\t\t\t\t\t\t\tprev = loop.length - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (loop[next] === node2) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (loop[prev] === node2) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tfunction FindIfTriangleTouchAnotherTriangle (triangle1, triangle2) {\r\n\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\tif (isNodeInTriangle(triangle1[i], triangle2) && isNodeInTriangle(triangle1[i + 1], triangle2)) {\r\n\t\t\t\t\t\treturn [triangle1[i], triangle1[i + 1]];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isNodeInTriangle(triangle1[0], triangle2) && isNodeInTriangle(triangle1[triangle1.length - 1], triangle2)) {\r\n\t\t\t\t\treturn [triangle1[0], triangle1[triangle1.length - 1]];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tfunction convertTrianglesPath(prePath, nodes, chain) {\r\n\t\t\t\t//add support of long path\r\n\t\t\t\tvar path = [];\r\n\t\t\t\t\r\n\t\t\t\tpath.push(getPathElem(chain[0], nodes));\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < prePath.length; i++) {\r\n\t\t\t\t\tvar coordinates = getMiddleOfLineSegment(prePath[i], nodes);\r\n\t\t\t\t\tpath.push({\r\n\t\t\t\t\t\tname: \"helpNode\" + uniqueHelpPointId,\r\n\t\t\t\t\t\tx: coordinates.x,\r\n\t\t\t\t\t\ty: coordinates.y,\r\n\t\t\t\t\t\ttype: \"helpNode\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuniqueHelpPointId++;\r\n\t\t\t\t}\r\n\t\t\t\tpath.push(getPathElem(chain[chain.length - 1], nodes));\r\n\t\t\t\t\r\n\t\t\t\treturn path;\r\n\t\t\t\t\r\n\t\t\t\tfunction getMiddleOfLineSegment(segment, nodes) {\r\n\t\t\t\t\tvar node1 = {\r\n\t\t\t\t\t\tx: nodes[segment[0]].x,\r\n\t\t\t\t\t\ty: nodes[segment[0]].y\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar node2 = {\r\n\t\t\t\t\t\tx: nodes[segment[1]].x,\r\n\t\t\t\t\t\ty: nodes[segment[1]].y\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tx: (node1.x + node2.x)/2,\r\n\t\t\t\t\t\ty: (node1.y + node2.y)/2\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tfunction getPathElem(nodeName, nodes) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: nodeName,\r\n\t\t\t\t\t\tx: nodes[nodeName].x,\r\n\t\t\t\t\t\ty: nodes[nodeName].y,\r\n\t\t\t\t\t\ttype: nodes[nodeName].type\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction putChainToPath(path, chain) {\r\n\t\t\tif (chain.length === 2) {\r\n\t\t\t\treturn path;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (path.length <= chain.length) {\r\n\t\t\t\treturn increasePathLength(path, chain);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn decreasePathLength(path, chain);\r\n\t\t\t\r\n\t\t\tfunction increasePathLength(path, chain) {\r\n\t\t\t\tvar isPathComplete = false;\r\n\t\t\t\twhile (!isPathComplete) {\r\n\t\t\t\t\tfor (var i = 0; i < path.length - 1; i = i + 2) {\r\n\t\t\t\t\t\tif (path.length >= chain.length) {\r\n\t\t\t\t\t\t\tisPathComplete = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar middle = getMiddle(path[i], path[i + 1]);\r\n\t\t\t\t\t\tpath.splice(i + 1, 0, middle);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 1; i < path.length - 1; i++) {\r\n\t\t\t\t\tpath[i].name = chain[i];\r\n\t\t\t\t\tpath[i].type = \"normal\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn path;\r\n\t\t\t\t\r\n\t\t\t\tfunction getMiddle(point1, point2) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tx: (point1.x + point2.x) / 2,\r\n\t\t\t\t\t\ty: (point1.y + point2.y) / 2\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction decreasePathLength(path, chain) {\r\n\t\t\t\tvar each = Math.floor((path.length - 2) / (chain.length - 2 + 1));\r\n\t\t\t\tfor (var i = each, j = 1; j < chain.length - 1; i = i + each, j++) {\r\n\t\t\t\t\tpath[i].name = chain[j];\r\n\t\t\t\t\tpath[i].type = \"normal\";\r\n\t\t\t\t}\r\n\t\t\t\treturn path;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction addPathToGraph(path, nodes, edges) {\r\n\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\tnodes[path[i].name] = {\r\n\t\t\t\t\ttype: path[i].type,\r\n\t\t\t\t\tx: path[i].x,\r\n\t\t\t\t\ty: path[i].y\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < path.length - 1; i++) {\r\n\t\t\t\tedges.push({\r\n\t\t\t\t\tbegin: path[i].name,\r\n\t\t\t\t\tend: path[i + 1].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction isPlaneLoopBroken(loop, path, nodes) {\r\n\t\t\tvar loopEdge = {\r\n\t\t\t\tp1: {x: nodes[loop[0]].x, y: nodes[loop[0]].y},\r\n\t\t\t\tp2: {x: nodes[\"touchPoint\"].x, y: nodes[\"touchPoint\"].y}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < path.length - 1; i++) {\r\n\t\t\t\tvar p1 = {x: path[i].x, y: path[i].y};\r\n\t\t\t\tvar p2 = {x: path[i + 1].x, y: path[i + 1].y};\r\n\t\t\t\t\r\n\t\t\t\tif (areCrossingWithTouch(loopEdge.p1, loopEdge.p2, p1, p2)) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tisLoopBroken: true,\r\n\t\t\t\t\t\tnewStartEdge: findNewStartEdge(path)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tisLoopBroken: false,\r\n\t\t\t\tnewStartEdge: undefined\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tfunction areCrossingWithTouch (p1, p2, p3, p4) {\r\n\t\t\t\tvar v1 = vectorMult(p4.x - p3.x, p4.y - p3.y, p1.x - p3.x, p1.y - p3.y);\r\n\t\t\t\tvar v2 = vectorMult(p4.x - p3.x, p4.y - p3.y, p2.x - p3.x, p2.y - p3.y);\r\n\t\t\t\tvar v3 = vectorMult(p2.x - p1.x, p2.y - p1.y, p3.x - p1.x, p3.y - p1.y);\r\n\t\t\t\tvar v4 = vectorMult(p2.x - p1.x, p2.y - p1.y, p4.x - p1.x, p4.y - p1.y);\r\n\t\t\t\tif (v1 == 0 && v2 == 0 && v3 == 0 && v4 == 0) {\r\n\t\t\t\t\tvar l1 = Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\r\n\t\t\t\t\tvar l2 = Math.sqrt(sqr(p3.x - p4.x) + sqr(p3.y - p4.y));\r\n\t\t\t\t\treturn sqr((p1.x + p2.x) - (p3.x + p4.x)) + sqr((p1.y + p2.y) - (p3.y + p4.y)) <= sqr(l1 + l2);\r\n\t\t\t\t}\r\n\t\t\t\tif ((v1 * v2) <= 0 && (v3 * v4) <= 0 ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t\t\r\n\t\t\t\tfunction vectorMult (ax, ay, bx, by) {\r\n\t\t\t\t\treturn ax * by - bx * ay;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfunction sqr (x) {\r\n\t\t\t\t\treturn x*x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction findNewStartEdge(path) {\r\n\t\t\t\tvar newStartEdge = path[1];\r\n\t\t\t\tfor (var i = 1; i < path.length - 1; i++) {\r\n\t\t\t\t\tif (path[i].x > newStartEdge.x) {\r\n\t\t\t\t\t\tnewStartEdge = path[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn newStartEdge.name;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default PlaneWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/plane-worker/plane-worker.js","//this class works with coordinates in canvas\r\nvar uniqueID = 0;\r\nfunction Plane (loop, isOuter, id) {\r\n\tthis.loop = loop;\r\n\tthis.isOuter = isOuter;\r\n\tthis.id = uniqueID;\r\n\tuniqueID++;\r\n\t\r\n\t//add chain to plane, divide it to two planes(edges)\r\n\tthis.addChain = function (chain, helpPlaneInfo) {\r\n\t\tif (!this.isOuter || !helpPlaneInfo.isLoopBroken) {\r\n\t\t\treturn this.addSimpleChain(chain);\r\n\t\t}\r\n\t\treturn this.addChainInOuterLoop(chain, helpPlaneInfo.newStartEdge);\r\n\t}\r\n\t\r\n\tthis.addSimpleChain = function (chain) {\r\n\t\tvar loop1 = [];\r\n\t\tvar loop2 = [];\r\n\t\t\r\n\t\tvar i;\r\n\t\tfor (i = 0; i < this.loop.length; i++) {\r\n\t\t\tloop1.push(this.loop[i]);\r\n\t\t\tif (this.loop[i] === chain[0] || this.loop[i] === chain[chain.length - 1]) {\r\n\t\t\t\tloop2.push(this.loop[i]);\r\n\t\t\t\ti++;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (i; i < this.loop.length; i++) {\r\n\t\t\tloop2.push(this.loop[i]);\r\n\t\t\tif (this.loop[i] === chain[0] || this.loop[i] === chain[chain.length - 1]) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (var j = 1; j < chain.length - 1; j++) {\r\n\t\t\tloop1.push(chain[j]);\r\n\t\t}\r\n\t\t\r\n\t\tfor (var j = chain.length - 2; j > 0; j--) {\r\n\t\t\tloop2.push(chain[j]);\r\n\t\t}\r\n\t\t\r\n\t\tloop1.push(this.loop[i]);\r\n\t\ti++;\r\n\t\t\r\n\t\tfor (i; i < this.loop.length; i++) {\r\n\t\t\tloop1.push(this.loop[i]);\r\n\t\t}\r\n\t\t\r\n\t\treturn [new Plane(loop1, isPlaneOuter(loop1)), new Plane(loop2, isPlaneOuter(loop2))];\r\n\t}\r\n\r\n\tthis.addChainInOuterLoop = function (chain, newStartEdge) {\r\n\t\tvar loop1 = [];\r\n\t\tvar loop2 = [];\r\n\t\t\r\n\t\tvar i;\r\n\t\tfor (i = 0; i < this.loop.length; i++) {\r\n\t\t\tloop1.push(this.loop[i]);\r\n\t\t\tif (this.loop[i] === chain[0] || this.loop[i] === chain[chain.length - 1]) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var j = 1; j < chain.length - 1; j++) {\r\n\t\t\tloop2.unshift(chain[j]);\r\n\t\t\tif (chain[j] === newStartEdge)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\tloop2.push(this.loop[i]);\r\n\t\ti++;\r\n\t\t\r\n\t\tfor (var j = 1; j < chain.length - 1; j++) {\r\n\t\t\tloop1.push(chain[j]);\r\n\t\t}\r\n\t\t\r\n\t\tfor (i; i < this.loop.length; i++) {\r\n\t\t\tloop2.push(this.loop[i]);\r\n\t\t\tif (this.loop[i] === chain[0] || this.loop[i] === chain[chain.length - 1]) {\r\n\t\t\t\tloop1.push(this.loop[i]);\r\n\t\t\t\ti++;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (var j = chain.length - 2; j > 0; j--) {\r\n\t\t\tloop2.push(chain[j]);\r\n\t\t\tif (chain[j] === newStartEdge) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (i; i < this.loop.length; i++) {\r\n\t\t\tif (this.loop[i] === this.loop[0]) {\r\n\t\t\t\ti++;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tloop1.push(this.loop[i]);\r\n\t\t}\r\n\t\t\r\n\t\tfor (i; i < this.loop.length; i++) {\r\n\t\t\tloop2.push(this.loop[i]);\r\n\t\t}\r\n\t\t\r\n\t\treturn [new Plane(loop1, isPlaneOuter(loop1)), new Plane(loop2, isPlaneOuter(loop2))];\r\n\t}\r\n\t\r\n\tfunction isPlaneOuter(loop) {\r\n\t\tfor (var i = 0; i < loop.length; i++) {\r\n\t\t\tif (loop[i] === \"topRight\") return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport default Plane;\n\n\n// WEBPACK FOOTER //\n// ./src/plane/plane.js","'use strict'\n\nvar simplify = require('simplify-js');\n\nfunction toPoints(points, tolerance, highestQuality) {\n    var mappedToObjXY = mapPointsArray2ObjectXY(points);\n    var simplified;\n    if (tolerance !== undefined || highestQuality !== undefined) {\n        simplified = simplify(mappedToObjXY, tolerance, highestQuality);\n    } else {\n        simplified = mappedToObjXY;\n    }\n    var converted = catmullRom2bezier(simplified);\n    return converted;\n};\n\nfunction toPath(points, tolerance, highestQuality) {\n    var cubics = toPoints(points, tolerance, highestQuality);\n    var attribute = `M${points[0][0]}, ${points[0][1]}`;\n    for (let i = 0; i < cubics.length; i++) {\n        attribute += `C${cubics[i][0]},${cubics[i][1]} ${cubics[i][2]},${cubics[i][3]} ${cubics[i][4]},${cubics[i][5]}`;\n    }\n    return attribute;\n};\n\nfunction catmullRom2bezier(pts) {\n    var cubics = [];\n    for (var i = 0, iLen = pts.length; i < iLen; i++) {\n        var p = [\n            pts[i - 1],\n            pts[i],\n            pts[i + 1],\n            pts[i + 2]\n        ];\n        if (i === 0) {\n            p[0] = {\n                x: pts[0].x,\n                y: pts[0].y\n            }\n        }\n        if (i === iLen - 2) {\n            p[3] = {\n                x: pts[iLen - 2].x,\n                y: pts[iLen - 2].y\n            };\n        }\n        if (i === iLen - 1) {\n            p[2] = {\n                x: pts[iLen - 1].x,\n                y: pts[iLen - 1].y\n            };\n            p[3] = {\n                x: pts[iLen - 1].x,\n                y: pts[iLen - 1].y\n            };\n        }\n        var val = 6;\n        cubics.push([\n            (-p[0].x + val * p[1].x + p[2].x) / val,\n            (-p[0].y + val * p[1].y + p[2].y) / val,\n            (p[1].x + val * p[2].x - p[3].x) / val,\n            (p[1].y + val * p[2].y - p[3].y) / val,\n            p[2].x,\n            p[2].y\n        ]);\n    }\n    return cubics;\n}\n\nfunction mapPointsArray2ObjectXY(points) {\n    return points.map(function(point) {\n        return {\n            x: point[0],\n            y: point[1]\n        };\n    });\n}\n\nfunction mapPointsObjectXY2Array(points) {\n    return points.map(function(point) {\n        return [\n            point.x,\n            point.y\n        ];\n    });\n}\n\nmodule.exports = {\n    toPoints: toPoints,\n    toPath: toPath\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/svg-catmull-rom-spline/index.js\n// module id = 9\n// module chunks = 0","/*\n (c) 2013, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n(function () { 'use strict';\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y;\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1.x,\n        y = p1.y,\n        dx = p2.x - x,\n        dy = p2.y - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2.x;\n            y = p2.y;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\n// simplification using optimized Douglas-Peucker algorithm with recursion elimination\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n\n    var len = points.length,\n        MarkerArray = typeof Uint8Array !== 'undefined' ? Uint8Array : Array,\n        markers = new MarkerArray(len),\n        first = 0,\n        last = len - 1,\n        stack = [],\n        newPoints = [],\n        i, maxSqDist, sqDist, index;\n\n    markers[first] = markers[last] = 1;\n\n    while (last) {\n\n        maxSqDist = 0;\n\n        for (i = first + 1; i < last; i++) {\n            sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n            if (sqDist > maxSqDist) {\n                index = i;\n                maxSqDist = sqDist;\n            }\n        }\n\n        if (maxSqDist > sqTolerance) {\n            markers[index] = 1;\n            stack.push(first, index, index, last);\n        }\n\n        last = stack.pop();\n        first = stack.pop();\n    }\n\n    for (i = 0; i < len; i++) {\n        if (markers[i]) newPoints.push(points[i]);\n    }\n\n    return newPoints;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n\n// export as AMD module / Node module / browser or worker variable\nif (typeof define === 'function' && define.amd) define(function() { return simplify; });\nelse if (typeof module !== 'undefined') module.exports = simplify;\nelse if (typeof self !== 'undefined') self.simplify = simplify;\nelse window.simplify = simplify;\n\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/svg-catmull-rom-spline/~/simplify-js/simplify.js\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}